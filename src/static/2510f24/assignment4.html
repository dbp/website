<!doctype HTML>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ["$","$"], ["\\(","\\)"] ],
    displayMath: [ ["$$","$$"], 
                   ["\\[","\\]"], 
                   ["\\begin{equation}","\\end{equation}"], 
                   ["\\begin{equation*}","\\end{equation*}"] ],
    processEscapes: true,
    ignoreClass: "tex2jax_ignore|JavaHighlightBlock|JavaHighlight"
  },
  "HTML-CSS": {
    availableFonts: [],
    webFont: "Asana-Math",
    preferredFont: "Asana-Math",
    imageFont: null,
    mtexFontInherit: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="codemirror.js"></script>
<script src="python.js"></script>
<script src="runmode.js"></script>
<script src="setup-page.js"></script>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Assignment 4: Abstraction; Constructors</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Fundamentals II
<br/>
Introduction to Class-<wbr></wbr>based Program Design</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="General.html" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right"></td><td><a href="Texts.html" class="tocviewlink" data-pltdoc="x">Texts</a></td></tr><tr><td align="right"></td><td><a href="Lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right"></td><td><a href="Syllabus.html" class="tocviewlink" data-pltdoc="x">Syllabus</a></td></tr><tr><td align="right"></td><td><a href="Lab_Materials.html" class="tocviewlink" data-pltdoc="x">Lab Materials</a></td></tr><tr><td align="right"></td><td><a href="Assignments.html" class="tocviewselflink" data-pltdoc="x">Assignments</a></td></tr><tr><td align="right"></td><td><a href="Pair_Programming_Overview.html" class="tocviewlink" data-pltdoc="x">Pair Programming Overview</a></td></tr><tr><td align="right"></td><td><a href="code-style.html" class="tocviewlink" data-pltdoc="x">Code style</a></td></tr><tr><td align="right"></td><td><a href="Documentation.html" class="tocviewlink" data-pltdoc="x">Documentation</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="Assignments.html" class="tocviewlink" data-pltdoc="x">Assignments</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="assignment1.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 1:</span> Designing complex data</a></td></tr><tr><td align="right"></td><td><a href="assignment2.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 2:</span> Designing methods for complex data</a></td></tr><tr><td align="right"></td><td><a href="assignment3.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 3:</span> Designing methods for Complex Data, Practice with Lists and Accumulators</a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x"><span class="AssignmentNum">Assignment 4:</span> Abstraction; Constructors</a></td></tr><tr><td align="right"></td><td><a href="assignment5.html" class="tocviewlink" data-pltdoc="x"><span class="AssignmentNum">Assignment 5:</span> Mastermind</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x"><span class="AssignmentNum">Assignment 4:</span> Abstraction; Constructors</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="#%28part._.Instructions%29" class="tocviewlink" data-pltdoc="x">Instructions</a></td></tr><tr><td align="right"></td><td><a href="#%28part._.Practice_.Problems%29" class="tocviewlink" data-pltdoc="x">Practice Problems</a></td></tr><tr><td align="right">Problem 1:&nbsp;</td><td><a href="#%28part._.Abstracting_over_.Data_.Definitions%29" class="tocviewlink" data-pltdoc="x">Abstracting over Data Definitions</a></td></tr><tr><td align="right">Problem 2:&nbsp;</td><td><a href="#%28part._.Working_with_.Custom_.Constructors__.A_.Look_at_.Equality%29" class="tocviewlink" data-pltdoc="x">Working with Custom Constructors, A Look at Equality</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Instructions%29" class="tocsubseclink" data-pltdoc="x">Instructions</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Practice_.Problems%29" class="tocsubseclink" data-pltdoc="x">Practice Problems</a></td></tr><tr><td><span class="tocsublinknumber">Problem 1:<tt>&nbsp;</tt></span><a href="#%28part._.Abstracting_over_.Data_.Definitions%29" class="tocsubseclink" data-pltdoc="x">Abstracting over Data Definitions</a></td></tr><tr><td><span class="tocsublinknumber">Problem 2:<tt>&nbsp;</tt></span><a href="#%28part._.Working_with_.Custom_.Constructors__.A_.Look_at_.Equality%29" class="tocsubseclink" data-pltdoc="x">Working with Custom Constructors, A Look at Equality</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.14</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="assignment3.html" title="backward to &quot;Assignment 3: Designing methods for Complex Data, Practice with Lists and Accumulators&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="Assignments.html" title="up to &quot;Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="assignment5.html" title="forward to &quot;Assignment 5: Mastermind&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div><h4 class="heading"><a name="(part._)"></a><span class="AssignmentNum">Assignment 4:</span> Abstraction; Constructors<span class="button-group"><a href="#(part._)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p><span style="font-weight: bold">Goals:</span> Learn to abstract common code and use custom constructors.</p><h5 class="heading"><a name="(part._.Instructions)"></a>Instructions<span class="button-group"><a href="#(part._.Instructions)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h5><p><div class="SIntrapara"><span style="font-weight: bold">Be very, very careful with naming!</span>  Again, the solution files expect your submissions to
be named a certain way, so that they can define their own <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Examples</span><span class="RktMeta"></span></span></span> class with which
to test your code.  Therefore, whenever the assignment specifies:
</div><div class="SIntrapara"><ul><li><p>the names of classes,</p></li><li><p>the names and types of the fields within classes,</p></li><li><p>the names, types and order of the arguments to the constructor,</p></li><li><p>the names, types and order of arguments to methods, or</p></li><li><p>filenames,</p></li></ul></div><div class="SIntrapara">...be sure that your submission uses exactly those names.</div></p><p>Make sure you follow the style guidelines that Bottlenose enforces. For now the most
important ones are: using spaces instead of tabs, indenting by 2 characters, following
the naming conventions (data type names start with a capital letter, names of fields
and methods start with a lower case letter), and having spaces before curly braces.</p><p>You will submit this assignment by the deadline using the Bottlenose submission system.
You may submit as many times as you wish. Be aware of the fact that close to the
deadline the Bottlenose system may slow down to handle many submissions - so try to finish early.</p><p>There will be a separate submission for each problem - it makes it easier to grade each problem,
and to provide you with the feedback for each problem you work on.</p><p>This assignment has only one submission date.
You will submit each problem separately in handins by the deadline below:</p><p><span style="font-weight: bold">Due Date: Thursday, October 3rd, 9:00pm</span></p><h5 class="heading"><a name="(part._.Practice_.Problems)"></a>Practice Problems<span class="button-group"><a href="#(part._.Practice_.Problems)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h5><p>Work out these problems on your own. Save them in an electronic portfolio, so you can
show them to your instructor, review them before the exam, use them as a reference
when working on the homework assignments.</p><ul><li><p>Problems 18.1 - 18.4 on page 225</p></li><li><p>Problem 18.5 on page 229</p></li><li><p>Problem 18.6 on page 234</p></li><li><p>Problem 19.4 on page 263</p></li></ul><h3 class="heading">Problem 1:<tt>&nbsp;</tt><a name="(part._.Abstracting_over_.Data_.Definitions)"></a>Abstracting over Data Definitions<span class="button-group"><a href="#(part._.Abstracting_over_.Data_.Definitions)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><div class="RelatedFiles"><blockquote><p class="boxed">Related files:<br/><span class="hspace">&nbsp;&nbsp;</span><a href="files/assignments/R-beverages/files/assignments/R-beverages/Beverages.java">Beverages.java</a><span class="hspace">&nbsp;&nbsp;</span> </p></blockquote></div><p>In this problem, our data will represent different kinds of drinks you might
order at a coffee shop.  Each
drink has several attributes, some of which are common to them all and some of
which differ.</p><p><span class="emph">Note:</span> none of these methods are properly implemented. As given in the file,
they are all <span class="emph">stubs</span> that currently return a dummy value, so the code
will compile but not yet work.</p><p><span style="font-weight: bold">Warmup:</span> Download the file and work out the following problems:</p><ul><li><p>Make at least two examples of data for each of the three
classes.</p></li><li><p>Design the <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">isDecaf</span><span class="RktMeta"></span></span></span> method for each class.  Coffee is
never offered decaf; only Rooibos tea is decaffeinated; and
milkshakes are always decaffeinated.</p></li><li><p>Design the method <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">containsIngredient</span><span class="RktMeta"></span></span></span> for each class,
which determines if a given ingredient has been mixed into the drink.</p></li><li><p>Design the method <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">format</span><span class="RktMeta"></span></span></span> which produces a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjPrimType">String</span><span class="RktMeta"></span></span></span>
showing how the item would appear on a menu.
Bubble tea would show the size, then the variety, then the
mixins if any in parentheses, such as <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"24oz Black tea (with boba, milk)"</span><span class="RktMeta"></span></span></span> or <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"16oz Oolong (without mixins)"</span><span class="RktMeta"></span></span></span>.  Commas
separate the mixins (but no trailing comma), and if there
aren&rsquo;t any mixins, the format should say "without mixins".
Coffees are formatted similarly, as <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"Hot Arabica americano (with cream, sugar, hazelnut syrup)"</span><span class="RktMeta"></span></span></span> or <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"Iced Robusta demitasse (without mixins)"</span><span class="RktMeta"></span></span></span>.  Milkshakes look like <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"24oz Haagen-Dasz strawberry (without mixins)"</span><span class="RktMeta"></span></span></span> or <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjString">"32oz JPLicks peach (with sprinkles)"</span><span class="RktMeta"></span></span></span>.</p></li></ul><p>Once you have finished these methods and are confident that they work properly,
save the work you have done to a separate file. Do not submit the code as written so far.
The problems below are the main point of this exercise, and it will be helpful for you to
preserve the code written so far as a reference against which to compare your revised code below.
<span class="emph">Again, submit only the work below.</span></p><ul><li><p>Look at the code and identify all places where the code repeats &#8212;<wbr></wbr>
the opportunity for abstraction.</p><p>Lift the common fields to an abstract class <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">ABeverage</span><span class="RktMeta"></span></span></span>, which should
implement <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">IBeverage</span><span class="RktMeta"></span></span></span>.</p><p>Make sure you include a constructor in the abstract class, and change
the constructors in the derived classes accordingly. Run the program
and make sure all test cases work as before.</p></li><li><p>For each method that is defined in all three classes decide to which
category it belongs:</p><ul><li><p>The method bodies in the different classes are all
different, and so the method has to be declared as
<span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjKeyword">abstract</span><span class="RktMeta"></span></span></span> in the <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjKeyword">abstract</span><span class="RktMeta"></span></span></span> class.</p></li><li><p>The method bodies are the same in all classes and it
can be implemented concretely in the <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjKeyword">abstract</span><span class="RktMeta"></span></span></span> class.</p></li><li><p>The method bodies are the same for two of the classes,
but are different in one class &#8212;<wbr></wbr> therefore we can define
the common body in the <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjKeyword">abstract</span><span class="RktMeta"></span></span></span> class and override
it in only one derived class.</p></li></ul><p>Hint: You might find that you can abstract more behavior if you design
more helper methods...</p><p>Now, lift the methods that can be lifted and run all tests again.</p></li></ul><p>Submit your work in a file named <span class="RktSym">Beverages.java</span><span class="RktMeta"></span>.</p><h3 class="heading">Problem 2:<tt>&nbsp;</tt><a name="(part._.Working_with_.Custom_.Constructors__.A_.Look_at_.Equality)"></a>Working with Custom Constructors, A Look at Equality<span class="button-group"><a href="#(part._.Working_with_.Custom_.Constructors__.A_.Look_at_.Equality)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>When dyers create pigment mixes to dye yarn, they combine amounts (in grams) of
red, yellow, blue and black pigments.  A perfect recipe for a dye mix ensures
the relative amounts of the four colors are appropriate:</p><ul><li><p><span class="emph">Either</span> the weight of black pigment is no more than 5% the weight
of the other three colors combined, <span class="emph">or</span> the combined weight of the other
three colors is no more than 10% the weight of the black pigment.  (This is
because black is so much darker than the others, so it&rsquo;s a waste of pigment to
have a lot of black and a lot of the other colors at the same time.)</p></li><li><p>If there&rsquo;s any yellow at all, then there must be much more yellow than
blue: blue must be no more than a tenth of the yellow dye.</p></li></ul><p>Design a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">DyeRecipe</span><span class="RktMeta"></span></span></span> class.  The fields should be of type <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjPrimType">double</span><span class="RktMeta"></span></span></span>
and represent the weight of the four dye colors in grams.  A dye recipe is
always scaled such that the total amount of dye is 1g.  Provide three
constructors for this class:</p><ul><li><p>Your main constructor should take in all of the fields (in the given
order) and <span class="emph">enforce</span> all above constraints to ensure a perfect dye
recipe.  When finished, it should contain 1g of dye. <span style="font-weight: bold">Note:</span> To normalize the amounts to
1, divide each amount by the total of the amounts.</p></li><li><p>Provide another constructor that takes in the amount of red, yellow and
blue dyes, and produces the darkest perfect dye recipe it can
(by adjusting the weights as needed, while keeping the black dye weight
less than the total other dye weight).</p></li><li><p>Provide another constructor that takes in <span class="emph">two other dye recipes</span>,
and produces a perfect dye recipe that is a half-and-half mixture of
the two input recipes.  If there is too much black dye, you should
reduce its amount to the maximum allowable amount. (For instance,
combining an all-red mixture with an all-blue mixture should produce a
purple mixture.  Combining an all-red mixture with an all-black mixture
should produce a mix with 1/21 g of black, and 20/21 g of red.)</p></li></ul><p>You should use an <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">IllegalArgumentException</span><span class="RktMeta"></span></span></span> with a helpful message if the
above constraints cannot be enforced.</p><p><div class="SIntrapara">Once you&rsquo;ve completed the above constructors, you should:
</div><div class="SIntrapara"><ul><li><p>Remove as much duplicate code as possible from these constructors.
(Hint: you may want a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Utils</span><span class="RktMeta"></span></span></span> class to help with computing or enforcing
some of the constraints.)</p></li><li><p>Implement the method <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">sameRecipe</span><span class="ProfjKeyword">(</span><span class="ProfjType">DyeRecipe</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">other</span><span class="ProfjKeyword">)</span><span class="RktMeta"></span></span></span> which returns
true if the same ingredients have the same weights to within 0.001 grams.</p></li></ul></div></p><p>Submit your work in a file named <span class="RktSym">Dyes.java</span><span class="RktMeta"></span>.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="assignment3.html" title="backward to &quot;Assignment 3: Designing methods for Complex Data, Practice with Lists and Accumulators&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="Assignments.html" title="up to &quot;Assignments&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="assignment5.html" title="forward to &quot;Assignment 5: Mastermind&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>