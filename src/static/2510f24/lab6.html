<!doctype HTML>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ["$","$"], ["\\(","\\)"] ],
    displayMath: [ ["$$","$$"], 
                   ["\\[","\\]"], 
                   ["\\begin{equation}","\\end{equation}"], 
                   ["\\begin{equation*}","\\end{equation*}"] ],
    processEscapes: true,
    ignoreClass: "tex2jax_ignore|JavaHighlightBlock|JavaHighlight"
  },
  "HTML-CSS": {
    availableFonts: [],
    webFont: "Asana-Math",
    preferredFont: "Asana-Math",
    imageFont: null,
    mtexFontInherit: true
  }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="codemirror.js"></script>
<script src="python.js"></script>
<script src="runmode.js"></script>
<script src="setup-page.js"></script>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Lab 6: Working with Cyclic Data</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="extra-styles.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Fundamentals II
<br/>
Introduction to Class-<wbr></wbr>based Program Design</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="General.html" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right"></td><td><a href="Texts.html" class="tocviewlink" data-pltdoc="x">Texts</a></td></tr><tr><td align="right"></td><td><a href="Lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right"></td><td><a href="Syllabus.html" class="tocviewlink" data-pltdoc="x">Syllabus</a></td></tr><tr><td align="right"></td><td><a href="Lab_Materials.html" class="tocviewselflink" data-pltdoc="x">Lab Materials</a></td></tr><tr><td align="right"></td><td><a href="Assignments.html" class="tocviewlink" data-pltdoc="x">Assignments</a></td></tr><tr><td align="right"></td><td><a href="Pair_Programming_Overview.html" class="tocviewlink" data-pltdoc="x">Pair Programming Overview</a></td></tr><tr><td align="right"></td><td><a href="code-style.html" class="tocviewlink" data-pltdoc="x">Code style</a></td></tr><tr><td align="right"></td><td><a href="Documentation.html" class="tocviewlink" data-pltdoc="x">Documentation</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="Lab_Materials.html" class="tocviewlink" data-pltdoc="x">Lab Materials</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="lab1.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 1:</span> Introduction to Eclipse and Simple Data Definitions</a></td></tr><tr><td align="right"></td><td><a href="lab2.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 2:</span> Working with Self-<wbr></wbr>Referential Data</a></td></tr><tr><td align="right"></td><td><a href="lab3.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 3:</span> Working with the debugger</a></td></tr><tr><td align="right"></td><td><a href="lab4.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 4:</span> Working with Abstract Classes, Problem Solving</a></td></tr><tr><td align="right"></td><td><a href="lab5.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 5:</span> Higher-<wbr></wbr>order functions</a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x"><span class="LabNum">Lab 6:</span> Working with Cyclic Data</a></td></tr><tr><td align="right"></td><td><a href="lab7.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 7:</span> Sameness</a></td></tr><tr><td align="right"></td><td><a href="lab8.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 8:</span> Parametric data and visitors</a></td></tr><tr><td align="right"></td><td><a href="lab9.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 9:</span> Working with Array<span class="mywbr"> &nbsp;</span>Lists and Loops</a></td></tr><tr><td align="right"></td><td><a href="lab10.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 10:</span> An Introduction to the JUnit testing library</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x"><span class="LabNum">Lab 6:</span> Working with Cyclic Data</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">Problem 1:&nbsp;</td><td><a href="#%28part._.Buddy_.Lists%29" class="tocviewlink" data-pltdoc="x">Buddy Lists</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">Problem 1:<tt>&nbsp;</tt></span><a href="#%28part._.Buddy_.Lists%29" class="tocsubseclink" data-pltdoc="x">Buddy Lists</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.14</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="lab5.html" title="backward to &quot;Lab 5: Higher-order functions&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="Lab_Materials.html" title="up to &quot;Lab Materials&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lab7.html" title="forward to &quot;Lab 7: Sameness&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div><h4 class="heading"><a name="(part._)"></a><span class="LabNum">Lab 6:</span> Working with Cyclic Data<span class="button-group"><a href="#(part._)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h4><p><span style="font-weight: bold">Goals:</span> The goal of this lab is to learn how to design
and use circularly referential data.</p><p><span style="font-weight: bold">Submission:</span> Design the <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">addBuddy</span><span class="RktMeta"></span></span></span> method in the <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Person</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">java</span><span class="RktMeta"></span></span></span> file. Create all of the examples
described below in the <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">ExamplesBuddies</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">java</span><span class="RktMeta"></span></span></span> file. Add tests for the following methods: <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">addBuddy</span><span class="RktMeta"></span></span></span>, <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">hasDirectBuddy</span><span class="RktMeta"></span></span></span>,
<span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">countCommonBuddies</span><span class="RktMeta"></span></span></span>, <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">hasExtendedBuddy</span><span class="RktMeta"></span></span></span> and <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">partyCount</span><span class="RktMeta"></span></span></span>. Zip the two files together and submit it
to handins. This will be graded on the completeness of your test cases. Note,
you should work with your partner on this, but the submission will be individual.
This is due at the end of your lab period.</p><h3 class="heading">Problem 1:<tt>&nbsp;</tt><a name="(part._.Buddy_.Lists)"></a>Buddy Lists<span class="button-group"><a href="#(part._.Buddy_.Lists)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><div class="RelatedFiles"><blockquote><p class="boxed">Related files:<br/><span class="hspace">&nbsp;&nbsp;</span><a href="files/labs/R-buddies/files/labs/R-buddies/Buddies.zip">Buddies.zip</a><span class="hspace">&nbsp;&nbsp;</span> </p></blockquote></div><p>In this lab, we&rsquo;ll look at how circular data naturally appears in lists of friends,
or &lsquo;buddy lists.&rsquo; These buddy lists could be IM buddy lists, Twitter followers, or lists of friends
on social networks. Intuitively, a buddy list is just a username and a list
of other buddies.  If two people are on each other&rsquo;s buddy lists, we immediately get circularity.</p><p>Download the <span class="stt">Buddies.zip</span> file above.  It contains the files:</p><ul><li><p><span class="stt">Person.java</span></p></li><li><p><span class="stt">ILoBuddy.java</span></p></li><li><p><span class="stt">MTLoBuddy.java</span></p></li><li><p><span class="stt">ConsLoBuddy.java</span></p></li><li><p><span class="stt">ExamplesBuddies.java</span></p></li></ul><p>(<span style="font-weight: bold">NOTE:</span> We&rsquo;re using non-generic lists in the lab deliberately, so we can
add whatever helper methods we need.  Really, these lists are being used as
part of a <span class="emph">graph</span>, and so they might deserve to have some special-purpose methods.)</p><p>Create a project LabBuddies and import the five files listed above
into the default package. Add the <span class="stt">tester.jar</span> library to the project
as you have done before.</p><p>All errors should have disappeared and you should be able to run the project.</p><ul><li><p>Before we can design any methods for the lists of buddies,
                we need to be able to make examples of buddy lists.</p><p>We would like to make examples of the following circle of buddies:</p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">Ann's buddies are Bob and Cole</span></p></td></tr><tr><td><p><span class="stt">Bob's buddies are Ann and Ed and Hank</span></p></td></tr><tr><td><p><span class="stt">Cole's buddy is Dan</span></p></td></tr><tr><td><p><span class="stt">Dan's buddy is Cole</span></p></td></tr><tr><td><p><span class="stt">Ed's buddy is Fay</span></p></td></tr><tr><td><p><span class="stt">Fay's buddies are Ed and Gabi</span></p></td></tr><tr><td><p><span class="stt">Gabi's buddies are Ed and Fay</span></p></td></tr><tr><td><p><span class="stt">Hank does not have any buddies</span></p></td></tr><tr><td><p><span class="stt">Jan's buddies are Kim and Len</span></p></td></tr><tr><td><p><span class="stt">Kim's buddies are Jan and Len</span></p></td></tr><tr><td><p><span class="stt">Len's buddies are Jan and Kim</span></p></td></tr></table></p><p>Trying to make such examples directly, via simple variable declarations
like <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Person</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">ann</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">=</span><span class="ProfjWhiteSpace"> </span><span class="ProfjDefault">.</span><span class="ProfjDefault">.</span><span class="ProfjDefault">.</span><span class="ProfjDefault">;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">Person</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">bob</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">=</span><span class="ProfjWhiteSpace"> </span><span class="ProfjDefault">.</span><span class="ProfjDefault">.</span><span class="ProfjDefault">.</span><span class="ProfjDefault">;</span><span class="RktMeta"></span></span></span> will not work, for the same
reason we couldn&rsquo;t directly create <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Book</span><span class="RktMeta"></span></span></span>s and <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Author</span><span class="RktMeta"></span></span></span>s that
referred to each other.  Where does the data break down?</p></li><li><p>Design the method <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">addBuddy</span><span class="RktMeta"></span></span></span> that <span class="emph">modifies</span> the person&rsquo;s
                buddy list by adding the given person to one person&rsquo;s buddy list.</p><p>This method should be defined in the class <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">Person</span><span class="RktMeta"></span></span></span> and have the following
purpose/effect statement and header:</p><div class="JavaHighlightBlock"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="ProfjComment">// EFFECT:
</span><span class="ProfjComment">// Change this person's buddy list so that it includes the given person
</span><span class="ProfjKeyword">void</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">addBuddy</span><span class="ProfjKeyword">(</span><span class="ProfjType">Person</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">buddy</span><span class="ProfjKeyword">)</span><span class="ProfjKeyword">{</span><span class="ProfjDefault">.</span><span class="ProfjDefault">.</span><span class="ProfjDefault">.</span><span class="ProfjKeyword">}</span><span class="RktMeta"></span></td></tr></table></blockquote></div><p>Add any additional methods you may need to make sure you can represent
the circle of buddies given above.</p></li></ul><p>If someone wants to invite a lot of friends to a party, he or she calls all
people on his or her list of buddies, and asks them to invite their friends
(buddies) as well, and ask their friends to invite any of their friends as well
(and ask them to invite <span class="emph">their</span> friends in turn...), eventually inviting
anyone that can be reached through this network of friends.</p><p>We call those on the person&rsquo;s buddy list the <span class="emph">direct</span> buddies and the others that
will also be invited to the party the <span class="emph">indirect</span> buddies.  (Note: some
people technically qualify as both direct and indirect buddies; find an example
of such a pair in the examples above.)  We call the set of direct and indirect
buddies the <span class="emph">extended</span> buddies of a person.</p><p>Now we would like to ask some common questions. For each question design
the method that will find the answer. As always, follow the Design Recipe!  The
purpose/effect statements and the headers for the methods are already given:</p><ul><li><p>Does this person have another person as a direct friend?</p><div class="JavaHighlightBlock"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="ProfjComment">// returns true if this Person has that as a direct buddy
</span><span class="ProfjPrimType">boolean</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">hasDirectBuddy</span><span class="ProfjKeyword">(</span><span class="ProfjType">Person</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">that</span><span class="ProfjKeyword">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></li><li><p>How many direct buddies do the two persons have in common?</p><div class="JavaHighlightBlock"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="ProfjComment">// returns the number of people that are direct buddies
</span><span class="ProfjComment">// of both this and that person
</span><span class="ProfjPrimType">int</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">countCommonBuddies</span><span class="ProfjKeyword">(</span><span class="ProfjType">Person</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">that</span><span class="ProfjKeyword">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></li><li><p><div class="SIntrapara">Will the given person be invited to a party organized by someone?
</div><div class="SIntrapara"><div class="JavaHighlightBlock"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="ProfjComment">// will the given person be (directly or indirectly) invited to a party
</span><span class="ProfjComment">// organized by this person?
</span><span class="ProfjPrimType">boolean</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">hasExtendedBuddy</span><span class="ProfjKeyword">(</span><span class="ProfjType">Person</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">that</span><span class="ProfjKeyword">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></div></p></li><li><p>How many people will be at the party if all those a person invites (directly or indirectly) show up?</p><div class="JavaHighlightBlock"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktMeta"></span><span class="ProfjComment">// returns the number of people who will show up at the party
</span><span class="ProfjComment">// given by this person
</span><span class="ProfjPrimType">int</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">partyCount</span><span class="ProfjKeyword">(</span><span class="ProfjKeyword">)</span><span class="RktMeta"></span></td></tr></table></blockquote></div></li></ul><p><span style="font-weight: bold">HINT</span>: some of these methods will benefit greatly from designing a helper
method first, that can be reused to help solve more than one of the questions
above.  You are encouraged to make a work-list for each problem, to figure out
what the high-level steps are <span class="emph">first</span>, before diving into writing code
without a plan.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="lab5.html" title="backward to &quot;Lab 5: Higher-order functions&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="Lab_Materials.html" title="up to &quot;Lab Materials&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lab7.html" title="forward to &quot;Lab 7: Sameness&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>