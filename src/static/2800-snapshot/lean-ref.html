<!DOCTYPE html>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Lean Tactic Reference</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="minted.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="minted-default-style.css" title="default"/><link rel="stylesheet" type="text/css" href="main.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Logic &amp; Computation</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="syllabus.html" class="tocviewlink" data-pltdoc="x">Syllabus</a></td></tr><tr><td align="right"></td><td><a href="schedule.html" class="tocviewlink" data-pltdoc="x">Schedule</a></td></tr><tr><td align="right"></td><td><a href="lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right"></td><td><a href="homework.html" class="tocviewlink" data-pltdoc="x">Homework</a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Lean Tactic Reference</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.7</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="hw12.html" title="backward to &quot;10 Homework 12&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Logic &amp; Computation&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3><a name="(part._lean-ref)"></a>Lean Tactic Reference</h3><p><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Tactic Use</span></p></td><td style="border-bottom: 1px solid black;"><p><span style="font-weight: bold">Tactic Description</span></p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">rfl</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>If the goal is an equality, complete the proof if the two sides are either the same, or can be made the same by evaluation.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">intros</span> <span class="n">id1</span> <span class="n">id2</span> <span class="bp">...</span></code></span><br/>or<br/><span class="default"><code class="highlight-inline"><span class="n">intro</span> <span class="n">id1</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>adds new hypothesis <span class="default"><code class="highlight-inline"><span class="n">id1</span> <span class="o">:</span> <span class="n">P1</span></code></span>,<span class="default"><code class="highlight-inline"><span class="n">id2</span> <span class="o">:</span> <span class="n">P2</span></code></span>, etc to premises, assuming goal is of the form <span class="default"><code class="highlight-inline"><span class="n">P1</span> <span class="bp">-&gt;</span> <span class="n">P2</span> <span class="bp">-&gt;</span> <span class="n">P</span></code></span> or <span class="default"><code class="highlight-inline"><span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">P1</span><span class="o">,</span> <span class="n">y</span> <span class="o">:</span> <span class="n">P2</span><span class="o">,</span> <span class="n">P</span></code></span><br/>The new goal will now be <span class="default"><code class="highlight-inline"><span class="n">P</span></code></span><br/>Note that if <span class="default"><code class="highlight-inline"><span class="n">id</span></code></span> is <span class="default"><code class="highlight-inline"><span class="n">_</span></code></span>, then Lean will generate a name for it.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="o">‹</span><span class="n">P</span><span class="o">›</span></code></span> (typed as \f&lt; P \f&gt;)</p></td><td style="border-bottom: 1px solid black;"><p>if there is only one hypothesis of type P, this is a way of referencing it anonymously in other tactics</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">cases</span> <span class="n">id</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>if <span class="default"><code class="highlight-inline"><span class="n">id</span></code></span> is a hypothesis of some inductive type, perform case analysis on it, either constructing multiple hypotheses (if it is a product type) or multiple goals (if it is a sum type).</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">exact</span> <span class="n">term</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>if <span class="default"><code class="highlight-inline"><span class="n">term</span></code></span> is a term of the same type as the goal, then this tactic completes the proof.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">assumption</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>if there is some hypothesis that has the same type as the goal, then this tactic completes the proof by using that hypothesis.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">case</span> <span class="n">name</span> <span class="n">id</span> <span class="bp">...</span> <span class="bp">=&gt;</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>if there is a goal called <span class="default"><code class="highlight-inline"><span class="n">name</span></code></span>, focus on it, and bind (optional) identifiers to parameters if available.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">constructor</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>if the goal is an inductive type, try applying its constructors to see if any match.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">apply</span> <span class="n">H</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">H</span></code></span> must be a hypothesis or theorem with type <span class="default"><code class="highlight-inline"><span class="n">P1</span> <span class="bp">-&gt;</span> <span class="n">P2</span> <span class="bp">-&gt;</span> <span class="bp">...</span> <span class="bp">-&gt;</span> <span class="n">PN</span> <span class="bp">-&gt;</span> <span class="n">Q</span></code></span>, where the goal has type <span class="default"><code class="highlight-inline"><span class="n">Q</span></code></span>. This tactic will replace the goal with N separate goals, <span class="default"><code class="highlight-inline"><span class="n">P1</span></code></span>, through <span class="default"><code class="highlight-inline"><span class="n">PN</span></code></span>, as it corresponds to deciding to prove the premises of <span class="default"><code class="highlight-inline"><span class="n">H</span></code></span> and then using it to prove the goal. In the simply case where you just have <span class="default"><code class="highlight-inline"><span class="n">P</span> <span class="bp">-&gt;</span> <span class="n">Q</span></code></span> this will replace <span class="default"><code class="highlight-inline"><span class="n">Q</span></code></span> with <span class="default"><code class="highlight-inline"><span class="n">P</span></code></span></p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">case</span> <span class="n">name</span> <span class="n">id</span> <span class="bp">...</span> <span class="bp">=&gt;</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>if there is a goal called <span class="default"><code class="highlight-inline"><span class="n">name</span></code></span>, focus on it, and bind (optional) identifiers to parameters if available.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">constructor</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>if the goal is an inductive type, try applying its constructors to see if any match.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">apply</span> <span class="n">H</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">H</span></code></span> must be a hypothesis or theorem with type <span class="default"><code class="highlight-inline"><span class="n">P1</span> <span class="bp">-&gt;</span> <span class="n">P2</span> <span class="bp">-&gt;</span> <span class="bp">...</span> <span class="bp">-&gt;</span> <span class="n">PN</span> <span class="bp">-&gt;</span> <span class="n">Q</span></code></span>, where the goal has type <span class="default"><code class="highlight-inline"><span class="n">Q</span></code></span>. This tactic will replace the goal with N separate goals, <span class="default"><code class="highlight-inline"><span class="n">P1</span></code></span>, through <span class="default"><code class="highlight-inline"><span class="n">PN</span></code></span>, as it corresponds to deciding to prove the premises of <span class="default"><code class="highlight-inline"><span class="n">H</span></code></span> and then using it to prove the goal. In the simply case where you just have <span class="default"><code class="highlight-inline"><span class="n">P</span> <span class="bp">-&gt;</span> <span class="n">Q</span></code></span> this will replace <span class="default"><code class="highlight-inline"><span class="n">Q</span></code></span> with <span class="default"><code class="highlight-inline"><span class="n">P</span></code></span></p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">tactic1</span> <span class="bp">&lt;;&gt;</span> <span class="n">tactic2</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>Apply <span class="default"><code class="highlight-inline"><span class="n">tactic1</span></code></span> to the current goal, and then apply <span class="default"><code class="highlight-inline"><span class="n">tactic2</span></code></span> to all goals that are generated by the result of tactic1 (0, 1, or more).</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">induction</span> <span class="n">id</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>If <span class="default"><code class="highlight-inline"><span class="n">id</span></code></span> is a hypothesis that is an inductive type, replace the current goal with cases for each of the constructors of the inductive type. </p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">id</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="bp">...</span><span class="o">]</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>Evaluates the goal, but only using the functions specified in the list</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">id</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="bp">...</span><span class="o">]</span> <span class="n">at</span> <span class="n">H</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>The same as above, but simplifies in a hypothesis H</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">rw</span> <span class="o">[</span><span class="n">H1</span><span class="o">,</span> <span class="n">H2</span><span class="o">,</span> <span class="bp">...</span><span class="o">]</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>If <span class="default"><code class="highlight-inline"><span class="n">HN</span></code></span> are equations that are hypotheses or theorems, rewrite the goal with them. Note that after rewriting, the tactic will attempt to close the goal using <span class="default"><code class="highlight-inline"><span class="n">rfl</span></code></span></p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">rw</span> <span class="o">[</span><span class="bp">&lt;-</span> <span class="n">H1</span><span class="o">,</span> <span class="n">H2</span><span class="o">,</span> <span class="bp">...</span><span class="o">]</span> <span class="n">at</span> <span class="n">H</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>The arrow allows to rewrite using the equation the other direction, and the <span class="default"><code class="highlight-inline"><span class="n">at</span> <span class="n">H</span></code></span> allows you to specify a hypothesis where you rewrite, rather than the goal</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">try</span> <span class="n">tac</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>Run tactic <span class="default"><code class="highlight-inline"><span class="n">tac</span></code></span>, and even if <span class="default"><code class="highlight-inline"><span class="n">tac</span></code></span> fails, still succeed, which is important when wrapping inside of <span class="default"><code class="highlight-inline"><span class="bp">&lt;;&gt;</span></code></span>, as the chain will stop at the first failing tactic.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">T</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">tac</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>Introduces a new local theorem called <span class="default"><code class="highlight-inline"><span class="n">H</span></code></span>, whose statement is <span class="default"><code class="highlight-inline"><span class="n">T</span></code></span>, proved by the tactic (or series of tacics <span class="default"><code class="highlight-inline"><span class="n">tac</span></code></span>.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">revert</span> <span class="n">id</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>If a variable <span class="default"><code class="highlight-inline"><span class="n">id</span> <span class="o">:</span> <span class="n">T</span></code></span> is in the premises, move it back into the goal by changing the goal to by <span class="default"><code class="highlight-inline"><span class="k">forall</span> <span class="n">id</span> <span class="o">:</span> <span class="n">T</span><span class="o">,</span> <span class="bp">...</span></code></span> where the goal was <span class="default"><code class="highlight-inline"><span class="bp">...</span></code></span>. This is effectively undoing <span class="default"><code class="highlight-inline"><span class="n">intros</span></code></span> and can be useful if you want to do induction on the second (or third) argument while leaving the rest in the goal.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">contradiction</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>Looks for an impossible hypothesis (i.e., <span class="default"><code class="highlight-inline"><span class="n">true</span> <span class="bp">=</span> <span class="n">false</span></code></span> , <span class="default"><code class="highlight-inline"><span class="mi">1</span> <span class="bp">=</span> <span class="mi">0</span></code></span>, etc. And use it to prove the goal. You can also often do this by doing case analysis on the impossible hypothesis, but this tactic is more convenient.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">generalize</span> <span class="n">H</span> <span class="o">:</span> <span class="n">expression</span> <span class="bp">=</span> <span class="n">id</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>Creates new hypothesis <span class="default"><code class="highlight-inline"><span class="n">H</span> <span class="o">:</span> <span class="n">expression</span> <span class="bp">=</span> <span class="n">id</span></code></span> , and replaces all occurrences of <span class="default"><code class="highlight-inline"><span class="n">expression</span></code></span> in the goal with <span class="default"><code class="highlight-inline"><span class="n">id</span></code></span>.  This is particularly useful to be be able to do case analysis on the result of an expression (e.g., a boolean expression). Note that if you want to replace occurrences of  <span class="default"><code class="highlight-inline"><span class="n">expression</span></code></span> in a hypothesis, you need to first <span class="default"><code class="highlight-inline"><span class="n">revert</span></code></span> it to move it back to the goal, and then <span class="default"><code class="highlight-inline"><span class="n">intros</span></code></span> it afterwards.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="k">suffices</span> <span class="n">h</span> <span class="o">:</span> <span class="n">H</span> <span class="kd">by</span> <span class="bp">...</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>Creates new hypothesis <span class="default"><code class="highlight-inline"><span class="n">h</span> <span class="o">:</span> <span class="n">H</span></code></span> which you can use to complete the proof. Once you finish the proof, you now have to prove <span class="default"><code class="highlight-inline"><span class="n">h</span> <span class="o">:</span> <span class="n">H</span></code></span>. This can be useful to 'cut' a proof in the middle: first go from the middle to the end, and then go back and prove up to that middle point.</p></td></tr><tr><td style="border-bottom: 1px solid black;"><p><span class="default"><code class="highlight-inline"><span class="n">rename_i</span> <span class="n">h</span></code></span></p></td><td style="border-bottom: 1px solid black;"><p>Gives a name <span class="default"><code class="highlight-inline"><span class="n">h</span></code></span> to the most recent anonymous hypothesis (unnamed or given with italicized, gray, crossed names). This can be useful if you manage to override a name, or you don't want to actually switch into a case before using names that it introduces.</p></td></tr></table></p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="hw12.html" title="backward to &quot;10 Homework 12&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Logic &amp; Computation&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>