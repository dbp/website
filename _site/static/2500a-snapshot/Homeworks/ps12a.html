<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <title>
   dbp.io
  </title>
  <link rel="stylesheet" type="text/css" href="../scribble.css" title="default">
  <link rel="stylesheet" type="text/css" href="../racket.css" title="default">
  <link rel="stylesheet" type="text/css" href="../manual-style.css" title="default">
  <link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default">
  <link rel="stylesheet" type="text/css" href="../pretty.css" title="default">
  <link rel="stylesheet" type="text/css" href="../pygments.css" title="default">
  <script type="text/javascript" src="../scribble-common.js"></script>
  <script type="text/javascript" src="../manual-racket.js"></script>
 </head>
 <body id="scribble-racket-lang-org">
  <div class="tocset">
   <div class="tocview">
    <div class="tocviewlist tocviewlisttopspace">
     <div class="tocviewtitle">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td style="width: 1em;">
          <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">►</a>
         </td>
         <td></td>
         <td>
          <a href="../index.html" class="tocviewlink" data-pltdoc="x">Accelerated Fundamentals of Computer Science 1</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <div class="tocviewsublisttop" style="display: none;" id="tocview_0">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../general/index.html" class="tocviewlink" data-pltdoc="x">General Information</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../advice/index.html" class="tocviewlink" data-pltdoc="x">Advice</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../syllabus/index.html" class="tocviewlink" data-pltdoc="x">Syllabus</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../ofc_hrs/index.html" class="tocviewlink" data-pltdoc="x">Office Hours/<span class="mywbr"> &nbsp;</span>Contact</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../comm/index.html" class="tocviewlink" data-pltdoc="x">Email, Discord</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="index.html" class="tocviewselflink" data-pltdoc="x">Homeworks</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../labs/index.html" class="tocviewlink" data-pltdoc="x">Labs</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../style/index.html" class="tocviewlink" data-pltdoc="x">The Style</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../texts/index.html" class="tocviewlink" data-pltdoc="x">Texts</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../contract/index.html" class="tocviewlink" data-pltdoc="x">Course Contract</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../design_recipe/index.html" class="tocviewlink" data-pltdoc="x">The Design Recipe</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="../placement/index.html" class="tocviewlink" data-pltdoc="x">Placement Test</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">▼</a>
        </td>
        <td></td>
        <td>
         <a href="index.html" class="tocviewlink" data-pltdoc="x">Homeworks</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublistbottom" style="display: block;" id="tocview_1">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps1b.html" class="tocviewlink" data-pltdoc="x">Homework 1b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps2a.html" class="tocviewlink" data-pltdoc="x">Homework 2a</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps2b.html" class="tocviewlink" data-pltdoc="x">Homework 2b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps3a.html" class="tocviewlink" data-pltdoc="x">Homework 3a</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps3b.html" class="tocviewlink" data-pltdoc="x">Homework 3b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps4a.html" class="tocviewlink" data-pltdoc="x">Homework 4a</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps4b.html" class="tocviewlink" data-pltdoc="x">Homework 4b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps5b.html" class="tocviewlink" data-pltdoc="x">Homework 5b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps6b.html" class="tocviewlink" data-pltdoc="x">Homework 6b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps7a.html" class="tocviewlink" data-pltdoc="x">Homework 7a</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps7b.html" class="tocviewlink" data-pltdoc="x">Homework 7b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps8a.html" class="tocviewlink" data-pltdoc="x">Homework 8a</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps8b.html" class="tocviewlink" data-pltdoc="x">Homework 8b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps9a.html" class="tocviewlink" data-pltdoc="x">Homework 9a</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps9b.html" class="tocviewlink" data-pltdoc="x">Homework 9b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps10b.html" class="tocviewlink" data-pltdoc="x">Homework 10b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps11a.html" class="tocviewlink" data-pltdoc="x">Homework 11a</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps11b.html" class="tocviewlink" data-pltdoc="x">Homework 11b</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="" class="tocviewselflink" data-pltdoc="x">Homework 12a</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ps14a.html" class="tocviewlink" data-pltdoc="x">Homework 14a</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
   </div>
  </div>
  <div class="maincolumn">
   <div class="main">
    <div class="versionbox">
     <span class="version">8.10</span>
    </div>
    <div class="navsettop">
     <span class="navleft">
     <div class="nosearchform"></div>
     &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
    </span>
    <span class="navright">&nbsp;&nbsp;<a href="ps11b.html" title="backward to &quot;Homework 11b&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Homeworks&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps14a.html" title="forward to &quot;Homework 14a&quot;" data-pltdoc="x">next →</a></span>&nbsp;
   </div>
   <h3>
    <a name="(part._ps12a)"></a>Homework 12a
   </h3>
   <p></p>
   <div class="SIntrapara">
    <blockquote class="refpara">
     <blockquote class="refcolumn">
      <blockquote class="refcontent">
       <p>
        <img src="assignments.png" alt="home work!" width="121" height="132">
       </p>
      </blockquote>
     </blockquote>
    </blockquote>
   </div>
   <div class="SIntrapara">
    <span style="font-weight: bold">Programming Language</span>  <span style="color: red">#lang htdp/isl+</span>
   </div>
   <p></p>
   <p>
    <span style="color: red">MUST BE DONE WITH YOUR PARTNER</span>
   </p>
   <p>
    <span style="color: red">MUST USE CHECKED-SIGNATURES!</span>
   </p>
   <p>
    <span style="font-weight: bold">Due Date</span> Tues at 9:00pm (<a href="../syllabus/index.html#%28part._12%29" data-pltdoc="x">Week 12</a>)
   </p>
   <p>
    <span style="font-weight: bold">Purpose</span> Implement a chat program, with rate limiting &amp; blocking, via universe and a shared server.
   </p>
   <p>
    <span style="font-weight: bold">Exercises</span>
   </p>
   <p>
    In this assignment, you will build a chat program, using big-bang and universe,
that connects to a single server that is shared by all students in the class.
Once you have finished, you will be able to send and recieve messages from other
students, as well as block particular students and turn on and off rate limiting.
   </p>
   <p>
    The most important thing, when writing universe programs, is understanding the
messages you can send to the server, and messages that the server will send to
you. See a complete specification below:
   </p>
   <p></p>
   <table cellspacing="0" cellpadding="0" class="SVerbatim">
    <tbody>
     <tr>
      <td>
       <p>
        <span class="stt">CLIENT TO SERVER MESSAGES:</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt">-------------------------</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt">STRING:</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">A string sent to the server is a message sent that should be broadcast to</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">all other connected clients. Your name will be attached to the message when</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">it is sent.</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt">SERVER TO CLIENT MESSAGES:</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt">--------------------------</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt">(list 'users [ListOf String]):</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">A list of all connected client names. These are the same names as will</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">be attached to messages when they are broadcast. This message will be</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">sent to all users every time a user connects or disconnects from the</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">server.</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt">(list 'send String String):</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">A message sent from a user. The first string is the users full name, the</span>
       </p>
      </td>
     </tr>
     <tr>
      <td>
       <p>
        <span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">second string is the message they are sending</span>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p></p>
   <p>
    From this description, you can see that when you send messages, you just include
the message, but when you receive messages, they have your full name attached.
How is that done? We will give you each a <span style="font-style: italic">unique</span> code that you should
use when you initialize big-bang (look out for them). Please design your
program in the following way:
   </p>
   <blockquote class="SCodeFlow">
    <table cellspacing="0" cellpadding="0" class="RktBlk">
     <tbody>
      <tr>
       <td>
        <span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">main : String -&gt; ...</span>
       </td>
      </tr>
      <tr>
       <td>
        <span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">define</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">main</span><span class="hspace">&nbsp;</span><span class="RktSym">code</span><span class="RktPn">)</span>
       </td>
      </tr>
      <tr>
       <td>
        <span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">big-bang</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">...</span></span></span>
       </td>
      </tr>
      <tr>
       <td>
        <span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">name</span></span></span><span class="hspace">&nbsp;</span><span class="RktSym">code</span><span class="RktPn">)</span>
       </td>
      </tr>
      <tr>
       <td>
        <span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">...</span></span></span>
       </td>
      </tr>
      <tr>
       <td>
        <span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">...</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span>
       </td>
      </tr>
     </tbody>
    </table>
   </blockquote>
   <p>
    i.e., you should make your main program take, as an argument, a String that will
be the unique code we assign to you. This should be used in the "name" clause of
big-bang. Then when you want to run your program, in the interactions window
type <span class="RktPn">(</span><span class="RktSym">main</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"YOURCODE"</span><span class="RktPn">)</span><span class="RktMeta"></span> to start the program.
   </p>
   <p>
    <span style="font-weight: bold">Connecting to the server</span>
   </p>
   <p>
    The server we have is running on a college machine, which should be accessible
anywhere on campus (as long as you are connected to campus internet). You should
include in your <span class="RktSym"><span class="badlink"><span class="RktValLink">big-bang</span></span></span><span class="RktMeta"></span> invocation a clause <span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">register</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">"lambda-chat.dbp.io"</span><span class="RktPn">)</span><span class="RktMeta"></span>, and it should have <span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">port</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktVal">20000</span><span class="RktPn">)</span><span class="RktMeta"></span> as well. If you
don’t have those two clauses, or are not on campus (or using a VPN to connect),
you won’t be able to connect to the server (though, you can and should write &amp;
test your handlers before connecting for the first time: don’t subject your
classmates to your buggy code!).
   </p>
   <p>
    <span style="font-weight: bold">IMPORTANT: You are responsible for any message that is sent to the server
using your code, so our recommendation is to not share it with your partner
(don’t save it in the file, just run it when you start the program). If you
decide to do that, it’s up to you, but know all messages are logged on the
server, and we will respond to any abusive, discriminatory, or hateful messages
with severe consequences (to the person whose code is used), both at the course
level (decide whether failing the course is worth what you are sending) and
sending it up to the university level as well.</span>
   </p>
   <p>
    We suggest that you design this program iteratively, but unlike in previous
assignments, we are going to only give you rough guidelines as to what you
should have in each part. It is up to you to design the world state, define any
helpers, etc.
   </p>
   <blockquote>
    <p>
     <span style="font-weight: bold">Exercise 1 </span>Receiving Messages. One half of the core of the chat program is
receiving and displaying messages. Your world state should be able to capture
some number of messages (it need not be arbitrary, since your window likely will
only show a certain number, and you are <span style="font-style: italic">not</span> implementing scrolling),
and you should have an <span class="RktSym"><span class="badlink"><span class="RktValLink">on-receive</span></span></span><span class="RktMeta"></span> handler that processes the
corresponding SERVER TO CLIENT message to add a new one. Your <span class="RktSym"><span class="badlink"><span class="RktValLink">to-draw</span></span></span><span class="RktMeta"></span>
handler should display all the messages in some way.
    </p>
   </blockquote>
   <blockquote>
    <p>
     <span style="font-weight: bold">Exercise 2 </span>Sending Messages. The other core is sending messages. To do this, you
should collect keyboard input in your world state until you hit a "\r" (carriage
return character), which indicates that the user has hit enter. You should
probably support delete (the "\b" keyboard event). Once enter has been hit, use
<span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">make-package</span></span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="badlink"><span class="RktValLink">...</span></span></span><span class="RktPn">)</span><span class="RktMeta"></span> to both update your world state and send a the message
to the server (look at the 2htdp/universe documentation for more details about
<span class="RktSym"><span class="badlink"><span class="RktValLink">make-package</span></span></span><span class="RktMeta"></span>).
    </p>
   </blockquote>
   <blockquote>
    <p>
     <span style="font-weight: bold">Exercise 3 </span>User List. Knowing who else is connected is helpful, if you want to
talk to them! Ensure your world state includes a user list, update your
<span class="RktSym"><span class="badlink"><span class="RktValLink">on-receive</span></span></span><span class="RktMeta"></span> to handle the message that the server sends updating this, and
update your <span class="RktSym"><span class="badlink"><span class="RktValLink">to-draw</span></span></span><span class="RktMeta"></span> handler to display the list of users somewhere on the screen.
    </p>
   </blockquote>
   <p>
    At this point, you have a functioning chat client. But, just as important as the
communication of messages in the design of programs like chat clients are
dealing with malicious content, abuse, etc. Now, we certainly aren’t going to
see any of that in <span style="font-style: italic">our</span> chat, but it is pervasive on the internet. In
the next two problems, you will implement some very basic moderation tools.
Tools that you give to users to control their experience are as important, if
not more, that the "core functionality" in programs that involve communication
with strangers, and products shouldn’t be considered "viable" until these types
of things are in place (and work).
   </p>
   <blockquote>
    <p>
     <span style="font-weight: bold">Exercise 4 </span>Blocking. One of the simplest way of handling someone who is sending
messages you don’t want to recieve is to be able to block them. In your world
state, you should add a list of blocked people, and in your <span class="RktSym"><span class="badlink"><span class="RktValLink">on-receive</span></span></span><span class="RktMeta"></span>,
you should not add messages that come from them to your list of messages (just
completely ignore them). How do people get blocked or unblocked? You should
implement this by <span style="font-style: italic">clicking</span> on the persons name. This requires you to
add an <span class="RktSym"><span class="badlink"><span class="RktValLink">on-mouse</span></span></span><span class="RktMeta"></span> handler, and to do some arithmetic with the x &amp; y
coordinate to tell if the click is on a name (and which one). You may end up
wanting to redo the rendering of the user list to make this easier (overlaying
every name on a rectangle of the same size, for example). When you do that
rendering, you probably want to indicate if a given user is blocked or not.
    </p>
   </blockquote>
   <blockquote>
    <p>
     <span style="font-weight: bold">Exercise 5 </span>Rate Limiting. In this exercise, we want you to add some mechanism to
turn on a "rate limit". The idea is that if someone logs on and suddenly starts
sending a huge number of messages, you want to be able to limit how many
messages you get and drop after that (like with blocking, just don’t store them
at all).
    </p>
    <p>
     You are welcome to come up with your own
idea, as long as it seems like a reasonable idea to handle this kind of abuse,
but the idea we suggest is the following: if the rate limit is turned on (add
another "click target" somewhere in your program, and update your
<span class="RktSym"><span class="badlink"><span class="RktValLink">on-mouse</span></span></span><span class="RktMeta"></span> accordingly to turn this "on" and "off"), there should be a
budget of messages every second (e.g., 4). When you receive messages, you
decrement this; if it hits 0, you stop accepting messages. In an <span class="RktSym"><span class="badlink"><span class="RktValLink">on-tick</span></span></span><span class="RktMeta"></span>
handler (use the second parameter, which says how frequently to invoke it, to
have it run every 1s), reset the budget. This way, if there are only a few
messages, the rate limit has no effect, but if there are a lot, only 4 per
second will get through. Obviously, this has the (severe) limitation that it is
not tied to users: you are welcome to implement a fancier version, but if you
do, please describe the strategy you are taking in a paragraph comment.
    </p>
   </blockquote>
   <div class="navsetbottom">
    <span class="navleft">
    <div class="nosearchform"></div>
    &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
   </span>
   <span class="navright">&nbsp;&nbsp;<a href="ps11b.html" title="backward to &quot;Homework 11b&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Homeworks&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ps14a.html" title="forward to &quot;Homework 14a&quot;" data-pltdoc="x">next →</a></span>&nbsp;
  </div>
 </div>
</div>
<div id="contextindicator">
 &nbsp;
</div>
</body>
</html>
