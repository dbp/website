<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <title>
   dbp.io
  </title>
  <link rel="stylesheet" type="text/css" href="scribble.css" title="default">
  <link rel="stylesheet" type="text/css" href="racket.css" title="default">
  <link rel="stylesheet" type="text/css" href="minted.css" title="default">
  <link rel="stylesheet" type="text/css" href="manual-style.css" title="default">
  <link rel="stylesheet" type="text/css" href="manual-racket.css" title="default">
  <link rel="stylesheet" type="text/css" href="minted-default-style.css" title="default">
  <link rel="stylesheet" type="text/css" href="main.css" title="default">
  <script type="text/javascript" src="scribble-common.js"></script>
  <script type="text/javascript">
   (function() {
  document.write('<link rel="stylesheet" href="katex/katex.min.css" />');
})();(function() {document.write('<scr' + 'ipt type="text/javascript" src="katex/katex.min.js"></scr' + 'ipt>');})();(function(f) {
  // A "simple" onLoad function
  if (window.document.readyState == "complete") {
    f();
  } else if (window.document.addEventListener) {
    window.document.addEventListener("DOMContentLoaded", f, false);
  } else if (window.attachEvent) {
    window.attachEvent("onreadystatechange", function() {
      if (window.document.readyState == "complete") {
        f();
      }
    });
  } else {
    var oldLoad = window.onload;
    if (typeof(oldLoad) == "function") {
      window.onload = function() {
        try {
          oldLoad();
        } finally {
          f();
        }
      };
    } else {
      window.onload = f;
    }
  }
})(function() {
  // This is an ugly way to change the doctype, in case the scribble document
  // did not use (with-html5).
  if (!(document.doctype && document.doctype.publicId == '')) {
    if (console && console.log) {
      console.log("Re-wrote the document to use the HTML5 doctype.\n"
                  + "  Consider using the following declaration:\n"
                  + "      @title[#:style (with-html5 manual-doc-style)]{…}");
    }
    var wholeDoc = '<!doctype HTML>\n' + document.documentElement.outerHTML;
    document.open();
    document.clear();
    document.write(wholeDoc);
  }
  var inlineElements = document.getElementsByClassName("texMathInline");
  for (var i = 0; i < inlineElements.length; i++) {
    var e = inlineElements[i];
    katex.render(e.textContent, e, { displayMode:false, throwOnError:false });
  }
  var displayElements = document.getElementsByClassName("texMathDisplay");
  for (var i = 0; i < displayElements.length; i++) {
    var e = displayElements[i];
    katex.render(e.textContent, e, { displayMode:true, throwOnError:false });
  }
});
  </script>
  <script type="text/javascript" src="manual-racket.js"></script>
 </head>
 <body id="scribble-racket-lang-org">
  <div class="tocset">
   <div class="tocview">
    <div class="tocviewlist tocviewlisttopspace">
     <div class="tocviewtitle">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td style="width: 1em;">
          <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">►</a>
         </td>
         <td></td>
         <td>
          <a href="index.html" class="tocviewlink" data-pltdoc="x">Logic &amp; Computation</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <div class="tocviewsublisttop" style="display: none;" id="tocview_0">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="syllabus.html" class="tocviewlink" data-pltdoc="x">Syllabus</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="schedule.html" class="tocviewlink" data-pltdoc="x">Schedule</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lectures.html" class="tocviewselflink" data-pltdoc="x">Lectures</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="homework.html" class="tocviewlink" data-pltdoc="x">Homework</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">▼</a>
        </td>
        <td></td>
        <td>
         <a href="lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublist" style="display: block;" id="tocview_1">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="" class="tocviewselflink" data-pltdoc="x">Lecture 1:<span class="mywbr"> &nbsp;</span> Intro</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l2.html" class="tocviewlink" data-pltdoc="x">Lecture 2:<span class="mywbr"> &nbsp;</span> Logistics, Specifications in ISL</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l3.html" class="tocviewlink" data-pltdoc="x">Lecture 3:<span class="mywbr"> &nbsp;</span> Propositional Logic in Code</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l4.html" class="tocviewlink" data-pltdoc="x">Lecture 4:<span class="mywbr"> &nbsp;</span> Design /<span class="mywbr"> &nbsp;</span> Specification Recipe</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l5.html" class="tocviewlink" data-pltdoc="x">Lecture 5:<span class="mywbr"> &nbsp;</span> Relational Specifications</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l6.html" class="tocviewlink" data-pltdoc="x">Lecture 6:<span class="mywbr"> &nbsp;</span> For-<wbr>all, Intro to PBT</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l7.html" class="tocviewlink" data-pltdoc="x">Lecture 7:<span class="mywbr"> &nbsp;</span> ==&gt;, PBT filtering</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l8.html" class="tocviewlink" data-pltdoc="x">Lecture 8:<span class="mywbr"> &nbsp;</span> PBT generators</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l9.html" class="tocviewlink" data-pltdoc="x">Lecture 9:<span class="mywbr"> &nbsp;</span> SAT</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l10.html" class="tocviewlink" data-pltdoc="x">Lecture 10:<span class="mywbr"> &nbsp;</span> SMT &amp; Rosette</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l11.html" class="tocviewlink" data-pltdoc="x">Lecture 11:<span class="mywbr"> &nbsp;</span> Rosette &amp; Finitization</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l12.html" class="tocviewlink" data-pltdoc="x">Lecture 12:<span class="mywbr"> &nbsp;</span> Higher order logic</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l13.html" class="tocviewlink" data-pltdoc="x">Lecture 13:<span class="mywbr"> &nbsp;</span> Functions</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l14.html" class="tocviewlink" data-pltdoc="x">Lecture 14:<span class="mywbr"> &nbsp;</span> Propositional logic</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l15.html" class="tocviewlink" data-pltdoc="x">Lecture 15:<span class="mywbr"> &nbsp;</span> Propositional logic &amp; programming</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l16.html" class="tocviewlink" data-pltdoc="x">Lecture 16:<span class="mywbr"> &nbsp;</span> Exam 1, Part A</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l17.html" class="tocviewlink" data-pltdoc="x">Lecture 17:<span class="mywbr"> &nbsp;</span> Exam 1, Part B</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l18.html" class="tocviewlink" data-pltdoc="x">Lecture 18:<span class="mywbr"> &nbsp;</span> Proving with tactics</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l19.html" class="tocviewlink" data-pltdoc="x">Lecture 19:<span class="mywbr"> &nbsp;</span> Inductive types &amp; proofs</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l20.html" class="tocviewlink" data-pltdoc="x">Lecture 20:<span class="mywbr"> &nbsp;</span> Lists</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l21.html" class="tocviewlink" data-pltdoc="x">Lecture 21:<span class="mywbr"> &nbsp;</span> Proof Practice</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l22.html" class="tocviewlink" data-pltdoc="x">Lecture 22:<span class="mywbr"> &nbsp;</span> Generalizing hypotheses</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l23.html" class="tocviewlink" data-pltdoc="x">Lecture 23:<span class="mywbr"> &nbsp;</span> Trees</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l35.html" class="tocviewlink" data-pltdoc="x">Lecture 35:<span class="mywbr"> &nbsp;</span> Exam 2, Part A</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l36.html" class="tocviewlink" data-pltdoc="x">Lecture 36:<span class="mywbr"> &nbsp;</span> Exam 2, Part B</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">►</a>
        </td>
        <td></td>
        <td>
         <a href="" class="tocviewselflink" data-pltdoc="x">Lecture 1:<span class="mywbr"> &nbsp;</span> Intro</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublistbottom" style="display: none;" id="tocview_2">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right">
          1&nbsp;
         </td>
         <td>
          <a href="#%28part._.Purpose%29" class="tocviewlink" data-pltdoc="x">Purpose</a>
         </td>
        </tr>
        <tr>
         <td align="right">
          2&nbsp;
         </td>
         <td>
          <a href="#%28part._.Outline%29" class="tocviewlink" data-pltdoc="x">Outline</a>
         </td>
        </tr>
        <tr>
         <td align="right">
          3&nbsp;
         </td>
         <td>
          <a href="#%28part._.Administrative%29" class="tocviewlink" data-pltdoc="x">Administrative</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
   </div>
   <div class="tocsub">
    <div class="tocsubtitle">
     On this page:
    </div>
    <table class="tocsublist" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <span class="tocsublinknumber">1
        <tt>
         &nbsp;
        </tt>
       </span>
       <a href="#%28part._.Purpose%29" class="tocsubseclink" data-pltdoc="x">Purpose</a>
      </td>
     </tr>
     <tr>
      <td>
       <span class="tocsublinknumber">2
       <tt>
        &nbsp;
       </tt>
      </span>
      <a href="#%28part._.Outline%29" class="tocsubseclink" data-pltdoc="x">Outline</a>
     </td>
    </tr>
    <tr>
     <td>
      <span class="tocsublinknumber">3
      <tt>
       &nbsp;
      </tt>
     </span>
     <a href="#%28part._.Administrative%29" class="tocsubseclink" data-pltdoc="x">Administrative</a>
    </td>
   </tr>
  </tbody>
 </table>
</div>
</div>
<div class="maincolumn">
<div class="main">
 <div class="versionbox">
  <span class="version">8.7</span>
 </div>
 <div class="navsettop">
  <span class="navleft">
  <div class="nosearchform"></div>
  &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
 </span>
 <span class="navright">&nbsp;&nbsp;<a href="lectures.html" title="backward to &quot;Lectures&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="lectures.html" title="up to &quot;Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="l2.html" title="forward to &quot;Lecture 2: Logistics, Specifications in ISL&quot;" data-pltdoc="x">next →</a></span>&nbsp;
</div>
<h4>
 <a name="(part._l1)"></a>Lecture 1: Intro
</h4>
<h5>
 1
 <tt>
  &nbsp;
 </tt>
 <a name="(part._.Purpose)"></a>Purpose
</h5>
<p>
 Introduce the class, give high-level motivations.
</p>
<h5>
 2
 <tt>
  &nbsp;
 </tt>
 <a name="(part._.Outline)"></a>Outline
</h5>
<p>
 This course: newly redesigned, taking lessons from what worked and didn’t work about the course in the past, but also, from the world around us (program synthesis). While program synthesis is an incredibly old field, it was never something that seemed remotely mainstream until the last year or two. We have no way of predicting the programming languages, frameworks, tools, etc that you’ll be using when you graduate, but it seems pretty likely at this point that AI-based program synthesis will be involved.
</p>
<p>
 Why does this matter, and what does this have to do with this course? While program synthesis tools are already pretty good at going from prompts to code, and will only get better, they will always be vulnerable to producing things that, even if they look plausible, simply aren’t right. Or have security vulnerabilities. The output thus needs to be checked, and the best way to check it is to have a precise description of what the code should do: a specification. Armed with a specification, synthesis can be turned loose, as only synthesized programs that satisfy the spec will be accepted.
</p>
<p>
 So what we want to do with this course is both teach you what specifications are and how to write them and show you how specifications can be connected to programs. While we believe the former skills will become mainstream over the next decade or so, the latter will position you to be able to help build the tools that take synthesis mainstream. Certainly, working on the models themselves requires other skills: modern AI techniques involving deep learning, neural networks, etc. but we’re not concerned with that: these models exist and will continue to get better. If you’re interested in that, certainly take courses
on those topics! In this class, what we’re interested in is how to connect the models to reality, and that’s where specifications come in. We’ll use a variety of techniques in this class, and there are many more that we won’t cover, but having learned this, you’ll be in a position well ahead of those who haven’t had this background.
</p>
<p>
 So let’s get started.
</p>
<p>
 <span class="Larger">What is logic?</span>
</p>
<p>
 <span class="Larger">What is computation?</span>
</p>
<p>
 <span class="Larger">Are these things connected?</span>
</p>
<p>
 <span class="Larger">Goal of this class:</span> Learn how to write down precise descriptions of what code should do, and to discover how these <span style="font-style: italic">properties</span> can relate to the programs you are building.
</p>
<p>
 <span class="Larger">Problem with descriptions: imprecision.</span> One of most valuable domains: medical devices.
Consider designing an automatic insulin pump. It has electronics that periodically measure blood
sugar, and separately can deliver insulin to correct when blood sugar goes too high. Having too
little insulin in people with Type 1 diabetes is obviously a problem: hence the insulin pump,
but delivering too much insulin is also bad. Clearly, the software that reads the measurements
and decides how much insulin to deliver is quite important. How do we ensure it does the right
thing?
</p>
<p>
 First, we need to have a <span style="font-style: italic">precise</span> way of describing its behavior. You can try to do
this in English, and likely, will start that way, but English has all sorts of ambiguities: take
the word "or". In English, it usually means <span style="font-style: italic">exclusive</span> or, but sometimes might mean
non-exclusive or. In cases where a little ambiguity is fine (or indeed, desired: literature would be quite
boring if not for this!), this is fine,
but when it comes to places where we want the exact behavior to be understood and checked (by
doctors and scientists, in the case of the insulin pump), that’s not great.
</p>
<p>
 So instead, we turn to more formal languages. In this, logic is a great asset, as it allows us
to give precise meaning to what we want.
</p>
<p>
 How would we begin to describe how an insulin pump should work? One key idea, especially when
describing systems that operate over time, is to describe certain <span style="font-style: italic">temporal</span> properties
that it should have. For example, there might be some dosage that should never be exceeded over
a certain time interval, no matter what else the system was doing. Consider that the main
control function for the pump took two arguments: a history of blood sugar readings, and a
history of insulin doses (each, say, every second), and we need to determine what dosage to
give at the next second (which, next time our control function is called, will be the entry at
0 <span class="RktSym">SecondsAgo</span><span class="RktMeta"></span>). We could represent each of those as function
types, so the type of our control function might be:
</p>
<p>
 <span class="RktCmt">;</span><span class="hspace">&nbsp;</span><span class="RktCmt">control</span><span class="hspace">&nbsp;</span><span class="RktCmt">:</span><span class="hspace">&nbsp;</span><span class="RktCmt">[SecondsAgo</span><span class="hspace">&nbsp;</span><span class="RktCmt">-&gt;</span><span class="hspace">&nbsp;</span><span class="RktCmt">BloodSugar]</span><span class="hspace">&nbsp;</span><span class="RktCmt">[SecondsAgo</span><span class="hspace">&nbsp;</span><span class="RktCmt">-&gt;</span><span class="hspace">&nbsp;</span><span class="RktCmt">InsulinGiven]</span><span class="hspace">&nbsp;</span><span class="RktCmt">-&gt;</span><span class="hspace">&nbsp;</span><span class="RktCmt">InsulinGiven</span><span class="RktMeta"></span>
</p>
<p>
 If we wanted to never exceed a certain total dosage, say <span class="RktSym">MAX-DOSE-OVER-T</span><span class="RktMeta"></span>, over a certain
interval <span class="RktSym">T</span><span class="RktMeta"></span>, we could express that logically with the statement:
</p>
<p>
 <span class="texMathDisplay">\forall (Hx : SecondsAgo \rightarrow BloodSugar) (Rx : SecondsAgo \rightarrow InsulinGiven).\\ \quad \sum_{i=1}^{T} Rx(i) \lt \text{MAX-DOSE-OVER-T} \implies \\ \quad control(Hx, Rx) \lt \text{MAX-DOSE-OVER-T} - \sum_{i=1}^{T} Rx(i)</span>
</p>
<p>
 There might be simpler properties we also want to hold: never giving more than <span class="RktSym">MAX-DOSE</span><span class="RktMeta"></span> at
a single time, regardless of the readings or history of dosages:
</p>
<p>
 <span class="texMathDisplay">\forall (Hx : SecondsAgo \rightarrow BloodSugar) (Rx : SecondsAgo \rightarrow InsulinGiven).\\ \quad
control(Hx,Rx) \lt \text{MAX-DOSE}</span>
</p>
<p>
 And then, of course, once we get past the safety requirements, we can start expressing
properties about what we should give in terms of dosing: clearly, these requirements need to
come from experts, but they can then be expressed in terms of properties that use the history
of readings &amp; history of dosings. Let’s say we wanted to express that if the blood sugar reading
average was above 200 over the past 120 readings, and less than 10 units of insulin given (intentionally not giving units, to not give innacurate medical information), deliver 1 unit.
</p>
<p>
 <span class="texMathDisplay">\forall (Hx : SecondsAgo \rightarrow BloodSugar) (Rx : SecondsAgo \rightarrow InsulinGiven).\\ \quad ((\sum_{i=1}^{120} Hx(i)/120) \ge 200) \land ((\sum_{i=1}^{120} Rx(i)) \lt 10) \implies \\ \quad control(Hx, Rx) = 1</span>
</p>
<p>
 All of these have used a logical operator from first-order logic: <span class="RktSym">for-all</span><span class="RktMeta"></span>. We use this to express
that these are properties that should hold <span style="font-style: italic">no matter what</span> values come in.
</p>
<p>
 <span class="Larger">This course is about writing specifications</span>. We want to connect the logical operators that
you learned about in Discrete with actual code, as seen above. But it is also about learning how to
use those specifications. We will deploy a variety of tools, so by the end, you’ll understand
quite a bit of the landscape. What underlies all of them are logical properties, but the tools
are quite different.
</p>
<p>
 <span class="Larger">For the first</span> few weeks, we’ll use a language called <span class="RktSym">isl-spec</span><span class="RktMeta"></span>, which extends
the Intermediate Student Language from CS2500 with support for property-based testing. We’ll
learn how to formulate logical properties as code, and how to use PBT to partially check those
properties. You can install it from within DrRacket (need version 8.6 or 8.7) by going to <span class="RktSym">File</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym"><span class="nobreak">-&gt;</span></span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Install</span><span class="RktMeta"></span><span class="hspace">&nbsp;</span><span class="RktMeta"></span><span class="RktSym">Package...</span><span class="RktMeta"></span>, and then searching for <span class="RktSym">isl-spec</span><span class="RktMeta"></span>.
</p>
<p>
 We’ll learn that the representation of properties also matters. While the function (map) representation above might seem natural,
functions are somewhat opaque, and we might have an easier time reasoning about a sequence of readings. We can make that change, and
then actually <span style="font-style: italic">run</span> some of our properties.
</p>
<p>
 For example, consider a prototype (and wrong) implementation of the above <span class="RktSym">control</span><span class="RktMeta"></span> function.
We’ve changed the representation of our histories to lists instead of functions, as with the property-based
testing tooling, the primary goal is to find counter-examples, and lists will print out, whereas functions
are opaque. The question of data representation in order to support reasoning is an important one, and
one that we’ll return to.
</p>
<p></p>
<div class="SIntrapara">
 <div class="default">
  <div class="highlight">
   <pre><span></span><span class="kn">#lang </span><span class="nn">isl-spec</span><span class="w"></span>
</pre>
  </div>
 </div>
</div>
<div class="SIntrapara">
 <div class="default">
  <div class="highlight">
   <pre><span></span><span class="c1">; get-n-readings : [List-of Natural] Natural -&gt; [List-of Natural]</span><span class="w"></span>
<span class="p">(</span><span class="k">define</span><span class="w"> </span><span class="p">(</span><span class="n">get-n-readings</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="k">cond</span><span class="w"> </span><span class="p">[(</span><span class="nb">empty?</span><span class="w"> </span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="k">cond</span><span class="w"> </span><span class="p">[(</span><span class="nb">zero?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">'</span><span class="p">()]</span><span class="w"></span>
<span class="w">                          </span><span class="p">[(</span><span class="nb">positive?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">build-list</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">(</span><span class="k">λ</span><span class="p">(</span><span class="k">_</span><span class="p">)</span><span class="w"> </span><span class="mi">0</span><span class="p">))])]</span><span class="w"></span>
<span class="w">        </span><span class="p">[(</span><span class="nb">cons?</span><span class="w"> </span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="k">cond</span><span class="w"> </span><span class="p">[(</span><span class="nb">zero?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">'</span><span class="p">()]</span><span class="w"></span>
<span class="w">                         </span><span class="p">[(</span><span class="nb">positive?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="p">(</span><span class="nb">first</span><span class="w"> </span><span class="n">l</span><span class="p">)</span><span class="w"></span>
<span class="w">                                              </span><span class="p">(</span><span class="n">get-n-readings</span><span class="w"> </span><span class="p">(</span><span class="nb">rest</span><span class="w"> </span><span class="n">l</span><span class="p">)</span><span class="w"></span>
<span class="w">                                                              </span><span class="p">(</span><span class="nb">sub1</span><span class="w"> </span><span class="n">n</span><span class="p">)))])]))</span><span class="w"></span>


<span class="c1">; sum : [List-of Number] -&gt; Number</span><span class="w"></span>
<span class="p">(</span><span class="k">define</span><span class="w"> </span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="n">lon</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">foldr</span><span class="w"> </span><span class="nb">+</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">lon</span><span class="p">))</span><span class="w"></span>

<span class="c1">; average : [List-of Number] -&gt; Number</span><span class="w"></span>
<span class="p">(</span><span class="k">define</span><span class="w"> </span><span class="p">(</span><span class="n">average</span><span class="w"> </span><span class="n">lon</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">/</span><span class="w"> </span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="n">lon</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">length</span><span class="w"> </span><span class="n">lon</span><span class="p">)))</span><span class="w"></span>


<span class="c1">; control : [ListOf BloodSugar] [ListOf InsulinGiven] -&gt; InsulinGiven</span><span class="w"></span>
<span class="c1">; takes history of readings, history of dosing (any further back unknown), calculates new dose</span><span class="w"></span>
<span class="p">(</span><span class="k">define</span><span class="w"> </span><span class="p">(</span><span class="n">control</span><span class="w"> </span><span class="n">Hx</span><span class="w"> </span><span class="n">Rx</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>

<span class="p">(</span><span class="k">define</span><span class="w"> </span><span class="n">MAX-DOSE-OVER-T</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="k">define</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="mi">60</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="k">define</span><span class="w"> </span><span class="n">MAX-DOSE</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>

<span class="p">(</span><span class="n">check-property</span><span class="w"> </span><span class="p">(</span><span class="n">for-all</span><span class="w"> </span><span class="p">[(</span><span class="n">Hx</span><span class="w"> </span><span class="p">[</span><span class="n">ListOf</span><span class="w"> </span><span class="n">Natural</span><span class="p">])</span><span class="w"> </span><span class="p">(</span><span class="n">Rx</span><span class="w"> </span><span class="p">[</span><span class="n">ListOf</span><span class="w"> </span><span class="n">Natural</span><span class="p">])]</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[(</span><span class="n">already-given</span><span class="w"> </span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">(</span><span class="n">get-n-readings</span><span class="w"> </span><span class="n">Rx</span><span class="w"> </span><span class="p">(</span><span class="nb">-</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="mi">1</span><span class="p">))))]</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">==&gt;</span><span class="w"> </span><span class="p">(</span><span class="nb">&lt;</span><span class="w"> </span><span class="n">already-given</span><span class="w"> </span><span class="n">MAX-DOSE-OVER-T</span><span class="p">)</span><span class="w"></span>
<span class="w">         </span><span class="p">(</span><span class="nb">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">control</span><span class="w"> </span><span class="n">Hx</span><span class="w"> </span><span class="n">Rx</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">-</span><span class="w"> </span><span class="n">MAX-DOSE-OVER-T</span><span class="w"> </span><span class="n">already-given</span><span class="p">))))))</span><span class="w"></span>

<span class="p">(</span><span class="n">check-property</span><span class="w"> </span><span class="p">(</span><span class="n">for-all</span><span class="w"> </span><span class="p">[(</span><span class="n">Hx</span><span class="w"> </span><span class="p">[</span><span class="n">ListOf</span><span class="w"> </span><span class="n">Natural</span><span class="p">])</span><span class="w"> </span><span class="p">(</span><span class="n">Rx</span><span class="w"> </span><span class="p">[</span><span class="n">ListOf</span><span class="w"> </span><span class="n">Natural</span><span class="p">])]</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="nb">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">control</span><span class="w"> </span><span class="n">Hx</span><span class="w"> </span><span class="n">Rx</span><span class="p">)</span><span class="w"> </span><span class="n">MAX-DOSE</span><span class="p">)))</span><span class="w"></span>
</pre>
  </div>
 </div>
</div>
<p></p>
<p>
 <span class="Larger">We’ll next learn to use</span> a tool called Rosette, with leverages an SMT solver under the
hood to do much more exhaustive checking of a restricted subset of properties. SMT solvers generalize
solvers for the SAT problem in boolean propositional logic to other theories, including ones that involve
numbers, bitvectors, strings, etc. They are carefully limited in expressivity to allow surprisingly effective
solvers, especially given even plain-old SAT is exponential in the naive case: you have to check all of the
possible assignments. SMT solvers are
an incredibly important topic, and used extensively in industry. We’ll only spend a little bit
of time on them, but enough to give you a sense of what they can do.
</p>
<p>
 <span class="Larger">For the bulk of the semester</span>, we’ll learn to use the theorem prover Lean. Lean is
an industrial strength tool for expressing incredibly rich properties and writing code that
satisfies those properties. The properties we can express are richer, and the level of trust
that we get higher, but there’s a tradeoff: carrying out the proofs (as they are proofs!) is
much more difficult than using either PBT or SMT.
</p>
<h5>
 3
 <tt>
  &nbsp;
 </tt>
 <a name="(part._.Administrative)"></a>Administrative
</h5>
<p>
 We’ll cover most of the actual logistics next class, as I wanted to have the first class be a
bit more substantive, but a few important details:
</p>
<p>
 1. Homework for this class can be done in groups of any size or individually, and you are
welcome to get help from anyone on any homework: you just need to attribute those you got help from. When you submit your homework, you can submit in groups of any size: this has no impact on your grading, and if you work together, is much appreciated by the course staff, so we aren’t needlessly grading the same solution multiple times.
</p>
<p>
 2. There will be in-class quizes nearly every day, which will be small but not trivial: as long as you are
current with the material, you should be able to pass them. collectively, they count towards 40% of your grade, though
we will drop about 1/3 of them to not punish missing some classes too severely.
</p>
<div class="navsetbottom">
 <span class="navleft">
 <div class="nosearchform"></div>
 &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
</span>
<span class="navright">&nbsp;&nbsp;<a href="lectures.html" title="backward to &quot;Lectures&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="lectures.html" title="up to &quot;Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="l2.html" title="forward to &quot;Lecture 2: Logistics, Specifications in ISL&quot;" data-pltdoc="x">next →</a></span>&nbsp;
</div>
</div>
</div>
<div id="contextindicator">
&nbsp;
</div>
</body>
</html>
