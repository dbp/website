<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <title>
   dbp.io
  </title>
  <link rel="stylesheet" type="text/css" href="scribble.css" title="default">
  <link rel="stylesheet" type="text/css" href="minted.css" title="default">
  <link rel="stylesheet" type="text/css" href="manual-style.css" title="default">
  <link rel="stylesheet" type="text/css" href="manual-racket.css" title="default">
  <link rel="stylesheet" type="text/css" href="minted-default-style.css" title="default">
  <link rel="stylesheet" type="text/css" href="main.css" title="default">
  <script type="text/javascript" src="scribble-common.js"></script>
  <script type="text/javascript">
   (function() {
  document.write('<link rel="stylesheet" href="katex/katex.min.css" />');
})();(function() {document.write('<scr' + 'ipt type="text/javascript" src="katex/katex.min.js"></scr' + 'ipt>');})();(function(f) {
  // A "simple" onLoad function
  if (window.document.readyState == "complete") {
    f();
  } else if (window.document.addEventListener) {
    window.document.addEventListener("DOMContentLoaded", f, false);
  } else if (window.attachEvent) {
    window.attachEvent("onreadystatechange", function() {
      if (window.document.readyState == "complete") {
        f();
      }
    });
  } else {
    var oldLoad = window.onload;
    if (typeof(oldLoad) == "function") {
      window.onload = function() {
        try {
          oldLoad();
        } finally {
          f();
        }
      };
    } else {
      window.onload = f;
    }
  }
})(function() {
  // This is an ugly way to change the doctype, in case the scribble document
  // did not use (with-html5).
  if (!(document.doctype && document.doctype.publicId == '')) {
    if (console && console.log) {
      console.log("Re-wrote the document to use the HTML5 doctype.\n"
                  + "  Consider using the following declaration:\n"
                  + "      @title[#:style (with-html5 manual-doc-style)]{…}");
    }
    var wholeDoc = '<!doctype HTML>\n' + document.documentElement.outerHTML;
    document.open();
    document.clear();
    document.write(wholeDoc);
  }
  var inlineElements = document.getElementsByClassName("texMathInline");
  for (var i = 0; i < inlineElements.length; i++) {
    var e = inlineElements[i];
    katex.render(e.textContent, e, { displayMode:false, throwOnError:false });
  }
  var displayElements = document.getElementsByClassName("texMathDisplay");
  for (var i = 0; i < displayElements.length; i++) {
    var e = displayElements[i];
    katex.render(e.textContent, e, { displayMode:true, throwOnError:false });
  }
});
  </script>
  <script type="text/javascript" src="manual-racket.js"></script>
 </head>
 <body id="scribble-racket-lang-org">
  <div class="tocset">
   <div class="tocview">
    <div class="tocviewlist tocviewlisttopspace">
     <div class="tocviewtitle">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td style="width: 1em;">
          <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">►</a>
         </td>
         <td></td>
         <td>
          <a href="index.html" class="tocviewlink" data-pltdoc="x">Logic &amp; Computation</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <div class="tocviewsublisttop" style="display: none;" id="tocview_0">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="syllabus.html" class="tocviewlink" data-pltdoc="x">Syllabus</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="schedule.html" class="tocviewlink" data-pltdoc="x">Schedule</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lectures.html" class="tocviewselflink" data-pltdoc="x">Lectures</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="homework.html" class="tocviewlink" data-pltdoc="x">Homework</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ref.html" class="tocviewlink" data-pltdoc="x">Lean Tactic Reference</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">▼</a>
        </td>
        <td></td>
        <td>
         <a href="lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublist" style="display: block;" id="tocview_1">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l1.html" class="tocviewlink" data-pltdoc="x">Lecture 1:<span class="mywbr"> &nbsp;</span> Intro</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l2.html" class="tocviewlink" data-pltdoc="x">Lecture 2:<span class="mywbr"> &nbsp;</span> Logistics, Specifications in ISL</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l3.html" class="tocviewlink" data-pltdoc="x">Lecture 3:<span class="mywbr"> &nbsp;</span> Propositional Logic in Code</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l4.html" class="tocviewlink" data-pltdoc="x">Lecture 4:<span class="mywbr"> &nbsp;</span> Design /<span class="mywbr"> &nbsp;</span> Specification Recipe</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l5.html" class="tocviewlink" data-pltdoc="x">Lecture 5:<span class="mywbr"> &nbsp;</span> Relational Specifications</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l6.html" class="tocviewlink" data-pltdoc="x">Lecture 6:<span class="mywbr"> &nbsp;</span> For-<wbr>all, Intro to PBT</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l7.html" class="tocviewlink" data-pltdoc="x">Lecture 7:<span class="mywbr"> &nbsp;</span> ==&gt;, PBT filtering</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l8.html" class="tocviewlink" data-pltdoc="x">Lecture 8:<span class="mywbr"> &nbsp;</span> PBT generators</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l9.html" class="tocviewlink" data-pltdoc="x">Lecture 9:<span class="mywbr"> &nbsp;</span> SAT</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l10.html" class="tocviewlink" data-pltdoc="x">Lecture 10:<span class="mywbr"> &nbsp;</span> SMT &amp; Rosette</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l11.html" class="tocviewlink" data-pltdoc="x">Lecture 11:<span class="mywbr"> &nbsp;</span> Rosette &amp; Finitization</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l12.html" class="tocviewlink" data-pltdoc="x">Lecture 12:<span class="mywbr"> &nbsp;</span> Higher order logic</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l13.html" class="tocviewlink" data-pltdoc="x">Lecture 13:<span class="mywbr"> &nbsp;</span> Functions</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l14.html" class="tocviewlink" data-pltdoc="x">Lecture 14:<span class="mywbr"> &nbsp;</span> Propositional logic</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l15.html" class="tocviewlink" data-pltdoc="x">Lecture 15:<span class="mywbr"> &nbsp;</span> Propositional logic &amp; programming</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l16.html" class="tocviewlink" data-pltdoc="x">Lecture 16:<span class="mywbr"> &nbsp;</span> Exam 1, Part A</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l17.html" class="tocviewlink" data-pltdoc="x">Lecture 17:<span class="mywbr"> &nbsp;</span> Exam 1, Part B</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="" class="tocviewselflink" data-pltdoc="x">Lecture 18:<span class="mywbr"> &nbsp;</span> Proving with tactics</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l19.html" class="tocviewlink" data-pltdoc="x">Lecture 19:<span class="mywbr"> &nbsp;</span> Inductive types &amp; proofs</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l20.html" class="tocviewlink" data-pltdoc="x">Lecture 20:<span class="mywbr"> &nbsp;</span> Lists</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l21.html" class="tocviewlink" data-pltdoc="x">Lecture 21:<span class="mywbr"> &nbsp;</span>  Proof Practice</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l22.html" class="tocviewlink" data-pltdoc="x">Lecture 22:<span class="mywbr"> &nbsp;</span> Generalizing hypotheses</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l23.html" class="tocviewlink" data-pltdoc="x">Lecture 23:<span class="mywbr"> &nbsp;</span> Generalize</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l24.html" class="tocviewlink" data-pltdoc="x">Lecture 24:<span class="mywbr"> &nbsp;</span> Standard Libraries</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l25.html" class="tocviewlink" data-pltdoc="x">Lecture 25:<span class="mywbr"> &nbsp;</span> Forward Reasoning</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l26.html" class="tocviewlink" data-pltdoc="x">Lecture 26:<span class="mywbr"> &nbsp;</span> Proof Automation</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l27.html" class="tocviewlink" data-pltdoc="x">Lecture 27:<span class="mywbr"> &nbsp;</span> Compiler Correctness</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l28.html" class="tocviewlink" data-pltdoc="x">Lecture 28:<span class="mywbr"> &nbsp;</span> Induction</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l29.html" class="tocviewlink" data-pltdoc="x">Lecture 29:<span class="mywbr"> &nbsp;</span> Functions vs. Relations</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l30.html" class="tocviewlink" data-pltdoc="x">Lecture 30:<span class="mywbr"> &nbsp;</span> Why logic?</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l31.html" class="tocviewlink" data-pltdoc="x">Lecture 31:<span class="mywbr"> &nbsp;</span> Linear Logic</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l32.html" class="tocviewlink" data-pltdoc="x">Lecture 32</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l33.html" class="tocviewlink" data-pltdoc="x">Lecture 33</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l34.html" class="tocviewlink" data-pltdoc="x">Lecture 34</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l35.html" class="tocviewlink" data-pltdoc="x">Lecture 35:<span class="mywbr"> &nbsp;</span> Exam 2, Part A</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l36.html" class="tocviewlink" data-pltdoc="x">Lecture 36:<span class="mywbr"> &nbsp;</span> Exam 2, Part B</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l37.html" class="tocviewlink" data-pltdoc="x">Lecture 37</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l38.html" class="tocviewlink" data-pltdoc="x">Lecture 38</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">►</a>
        </td>
        <td></td>
        <td>
         <a href="" class="tocviewselflink" data-pltdoc="x">Lecture 18:<span class="mywbr"> &nbsp;</span> Proving with tactics</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublistbottom" style="display: none;" id="tocview_2">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right">
          1&nbsp;
         </td>
         <td>
          <a href="#%28part._.Purpose%29" class="tocviewlink" data-pltdoc="x">Purpose</a>
         </td>
        </tr>
        <tr>
         <td align="right">
          2&nbsp;
         </td>
         <td>
          <a href="#%28part._.Outline%29" class="tocviewlink" data-pltdoc="x">Outline</a>
         </td>
        </tr>
        <tr>
         <td align="right">
          3&nbsp;
         </td>
         <td>
          <a href="#%28part._.Re-doing_a_propositional_logic_proof%29" class="tocviewlink" data-pltdoc="x">Re-<wbr>doing a propositional logic proof</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
   </div>
   <div class="tocsub">
    <div class="tocsubtitle">
     On this page:
    </div>
    <table class="tocsublist" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <span class="tocsublinknumber">1
        <tt>
         &nbsp;
        </tt>
       </span>
       <a href="#%28part._.Purpose%29" class="tocsubseclink" data-pltdoc="x">Purpose</a>
      </td>
     </tr>
     <tr>
      <td>
       <span class="tocsublinknumber">2
       <tt>
        &nbsp;
       </tt>
      </span>
      <a href="#%28part._.Outline%29" class="tocsubseclink" data-pltdoc="x">Outline</a>
     </td>
    </tr>
    <tr>
     <td>
      <span class="tocsublinknumber">2.1
      <tt>
       &nbsp;
      </tt>
     </span>
     <a href="#%28part._.Tactics%29" class="tocsubseclink" data-pltdoc="x">Tactics</a>
    </td>
   </tr>
   <tr>
    <td>
     <span class="tocsublinknumber">3
     <tt>
      &nbsp;
     </tt>
    </span>
    <a href="#%28part._.Re-doing_a_propositional_logic_proof%29" class="tocsubseclink" data-pltdoc="x">Re-<wbr>doing a propositional logic proof</a>
   </td>
  </tr>
 </tbody>
</table>
</div>
</div>
<div class="maincolumn">
<div class="main">
<div class="versionbox">
 <span class="version">8.7</span>
</div>
<div class="navsettop">
 <span class="navleft">
 <div class="nosearchform"></div>
 &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
</span>
<span class="navright">&nbsp;&nbsp;<a href="l17.html" title="backward to &quot;Lecture 17: Exam 1, Part B&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="lectures.html" title="up to &quot;Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="l19.html" title="forward to &quot;Lecture 19: Inductive types &amp; proofs&quot;" data-pltdoc="x">next →</a></span>&nbsp;
</div>
<h4>
<a name="(part._l18)"></a>Lecture 18: Proving with tactics
</h4>
<h5>
1
<tt>
 &nbsp;
</tt>
<a name="(part._.Purpose)"></a>Purpose
</h5>
<p>
Learning how to use tactics to construct proofs
</p>
<h5>
2
<tt>
 &nbsp;
</tt>
<a name="(part._.Outline)"></a>Outline
</h5>
<h5>
2.1
<tt>
 &nbsp;
</tt>
<a name="(part._.Tactics)"></a>Tactics
</h5>
<p>
Up to now, we’ve mostly been writing proofs as <span style="font-style: italic">explicit</span> terms, but that is something that we
will actually do quite rarely. It turns out, rather than constructing the terms
directly, which for complicated proofs, might be rather involved, we can instead
invoke higher-level tactics that will construct a term for us.
</p>
<p>
Today, we’re going to focus primarily on the "Lean Infoview",
and how it, along with tactics, allow us to much more easily, and <span style="font-style: italic">interactively</span>, construct proofs.
</p>
<p>
We can switch
into "tactic mode" at any point using the keyword <span class="default"><code class="highlight-inline"><span class="kd">by</span></code></span>. On their
own, tactics can make our code harder to read, as they allow you to leave out details apparent
in the terms, but the "Lean Infoview" provides interactive feedback that results in a really nice environment for
constructing proofs. You’ve already seen one tactic, <span class="default"><code class="highlight-inline"><span class="n">rfl</span></code></span>, which we used for unit tests in the current homework. <span class="default"><code class="highlight-inline"><span class="n">rfl</span></code></span> performs evaluation on both sides, and then solves trivial equalities: equalities that are the exact same on both sides.
</p>
<p></p>
<table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;">
<tbody>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Use</span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Description</span>
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">rfl</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    If the goal is an equality, complete the proof if the two sides are either the same, or can be made the same by evaluation.
   </p>
  </td>
 </tr>
</tbody>
</table>
<p></p>
<p>
Let’s see how this works:
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rfl</span>
</pre>
</div>
</div>
<p>
<span class="default"><code class="highlight-inline"><span class="kd">example</span></code></span> creates anonymous (unnamed) theorems.
</p>
<p>
To learn more about tactics, let’s see a slightly more involved example, returning to our simple theorem about <span class="default"><code class="highlight-inline"><span class="n">And</span></code></span>:
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">def</span> <span class="n">and_2''</span> <span class="o">:</span> <span class="k">forall</span> <span class="o">{</span><span class="n">P</span>  <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">},</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span> <span class="bp">-&gt;</span> <span class="n">Q</span> <span class="o">:=</span> 
  <span class="kd">by</span> <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span> <span class="n">_</span>
     <span class="n">cases</span> <span class="o">‹</span><span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">›</span>
     <span class="n">exact</span> <span class="o">‹</span><span class="n">Q</span><span class="o">›</span>
</pre>
</div>
</div>
<p>
Here, we use three tactics. The first, <span class="default"><code class="highlight-inline"><span class="n">intros</span></code></span>, takes
identifiers from the <span style="font-style: italic">goal</span> and moves them into the <span style="font-style: italic">premise</span> of the
proof. This corresponds, in the underlying term, to a function with identifiers. Here
we give explicit names to the propositions <span class="default"><code class="highlight-inline"><span class="n">P</span></code></span> and
<span class="default"><code class="highlight-inline"><span class="n">Q</span></code></span>, but giving no name to the conjunction, indicated by an
underscore.
</p>
<p>
The Infoview will always have some number of goals (none if the proof is complete), and each one will have assumptions or premises (or hypotheses) that are available to use in the proof of that goal. The assumptions are separate from the obligation by a turnstile <span class="texMathInline">\vdash</span>, and the goal is the proposition that we are trying to prove. This is all shown under the "Tactic state" header.
</p>
<p></p>
<table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;">
<tbody>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Use</span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Description</span>
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">intros</span> <span class="n">id1</span> <span class="n">id2</span> <span class="bp">...</span></code></span><br>or<br><span class="default"><code class="highlight-inline"><span class="n">intro</span> <span class="n">id1</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    adds new hypothesis <span class="default"><code class="highlight-inline"><span class="n">id1</span> <span class="o">:</span> <span class="n">P1</span></code></span>,<span class="default"><code class="highlight-inline"><span class="n">id2</span> <span class="o">:</span> <span class="n">P2</span></code></span>, etc to premises, assuming goal is of the form <span class="default"><code class="highlight-inline"><span class="n">P1</span> <span class="bp">-&gt;</span> <span class="n">P2</span> <span class="bp">-&gt;</span> <span class="n">P</span></code></span> or <span class="default"><code class="highlight-inline"><span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">P1</span><span class="o">,</span> <span class="n">y</span> <span class="o">:</span> <span class="n">P2</span><span class="o">,</span> <span class="n">P</span></code></span><br>The new goal will now be <span class="default"><code class="highlight-inline"><span class="n">P</span></code></span><br>Note that if <span class="default"><code class="highlight-inline"><span class="n">id</span></code></span> is <span class="default"><code class="highlight-inline"><span class="n">_</span></code></span>, then Lean will generate a name for it.
   </p>
  </td>
 </tr>
</tbody>
</table>
<p></p>
<p>
We then do case analysis on one of my hypotheses: which one? The one we
didn’t give a name to, and so we refer to it by its type, which Lean allows
me to do using "french quotes" (typed as \f&lt; and \f&gt;): provided there is only one
hypothesis with that type, this is not ambiguous, and it can be easier to read. Case
analysis on a pair will then give me hypotheses for the two conjuncts. Note that it does not manipulate the goal in this case, but simply changes the form of the hypotheses. If we did case analysis on a <span style="font-style: italic">disjunction</span> (also known as a sum), we would get multiple goals, as there would be multiple different cases to consider. Case analysis in tactics corresponds to pattern matching in the underlying terms, though the Infoview state can make it a bit easier to manage.
</p>
<p></p>
<table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;">
<tbody>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Use</span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Description</span>
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="o">‹</span><span class="n">P</span><span class="o">›</span></code></span> (typed as \f&lt; P \f&gt;)
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    if there is only one hypothesis of type P, this is a way of referencing it anonymously in other tactics
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">cases</span> <span class="n">id</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    if <span class="default"><code class="highlight-inline"><span class="n">id</span></code></span> is a hypothesis of some inductive type, perform case analysis on it, either constructing multiple hypotheses (if it is a product type) or multiple goals (if it is a sum type).
   </p>
  </td>
 </tr>
</tbody>
</table>
<p></p>
<p>
At this point, we can
complete the proof by saying we want the one with type <span class="default"><code class="highlight-inline"><span class="n">Q</span></code></span>, using the tactic <span class="default"><code class="highlight-inline"><span class="n">exact</span></code></span>. This is a tactic that takes a term, and if it matches the goal, it completes the proof. It is the way to go back into "term mode" from "tactic mode" (it is the inverse of <span class="default"><code class="highlight-inline"><span class="kd">by</span></code></span> in this way). All of the proofs we did before we started using tactics could be done "in tactic mode" by using a single invocation of <span class="default"><code class="highlight-inline"><span class="n">exact</span></code></span>, though it would be a bit pointless.
</p>
<p></p>
<table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;">
<tbody>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Use</span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Description</span>
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">exact</span> <span class="n">term</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    if <span class="default"><code class="highlight-inline"><span class="n">term</span></code></span> is a term of the same type as the goal, then this tactic completes the proof.
   </p>
  </td>
 </tr>
</tbody>
</table>
<p></p>
<p>
There are many other ways we could write this. First, we could use the tactic
<span class="default"><code class="highlight-inline"><span class="n">assumption</span></code></span> to complete the proof: it looks for a hypothesis
that matches the goal.
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">def</span> <span class="n">and_2'''</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">P</span>  <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">},</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span> <span class="bp">-&gt;</span> <span class="n">Q</span> <span class="o">:=</span> 
  <span class="kd">by</span> <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span> <span class="n">_</span>
     <span class="n">cases</span> <span class="o">‹</span><span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">›</span>
     <span class="n">assumption</span>
</pre>
</div>
</div>
<p></p>
<table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;">
<tbody>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Use</span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Description</span>
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">assumption</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    if there is some hypothesis that has the same type as the goal, then this tactic completes the proof by using that hypothesis.
   </p>
  </td>
 </tr>
</tbody>
</table>
<p></p>
<p>
We also could have given an explicit name to the conjunction, and referred to that
with <span class="default"><code class="highlight-inline"><span class="n">cases</span></code></span>:
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">def</span> <span class="n">and_2''''</span> <span class="o">:</span> <span class="k">forall</span> <span class="o">{</span><span class="n">P</span>  <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">},</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span> <span class="bp">-&gt;</span> <span class="n">Q</span> <span class="o">:=</span> 
  <span class="kd">by</span> <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span> <span class="n">pq</span>
     <span class="n">cases</span> <span class="n">pq</span>
     <span class="n">assumption</span>
</pre>
</div>
</div>
<p>
We can also be more precise with my case analysis. Conjunctions are created with
<span class="default"><code class="highlight-inline"><span class="n">And.intro</span></code></span>, which has two fields, so we can pattern match to get:
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">def</span> <span class="n">and_2'''''</span> <span class="o">:</span> <span class="k">forall</span> <span class="o">{</span><span class="n">P</span>  <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">},</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span> <span class="bp">-&gt;</span> <span class="n">Q</span> <span class="o">:=</span> 
  <span class="kd">by</span> <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span> <span class="n">pq</span>
     <span class="n">cases</span> <span class="n">pq</span> <span class="k">with</span> <span class="bp">|</span> <span class="n">intro</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=&gt;</span> <span class="n">exact</span> <span class="n">b</span>
</pre>
</div>
</div>
<p>
This form of <span class="default"><code class="highlight-inline"><span class="n">cases</span></code></span> is very close to how <span class="default"><code class="highlight-inline"><span class="k">match</span></code></span> looks in the term language. When doing case analysis on something like <span class="default"><code class="highlight-inline"><span class="n">And</span></code></span>, knowing which case we are in doesn’t do much (as there is only one), but as we’ll see below, when doing case analysis on inductive types with multiple constructors (like <span class="default"><code class="highlight-inline"><span class="n">Or</span></code></span>), we will want to be able to identify the case of our proof. While we can write it in the matching style, we can also simply identify the case we want to work on with <span class="default"><code class="highlight-inline"><span class="n">case</span></code></span>:
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">def</span> <span class="n">and_2''''''</span> <span class="o">:</span> <span class="k">forall</span> <span class="o">{</span><span class="n">P</span>  <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">},</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span> <span class="bp">-&gt;</span> <span class="n">Q</span> <span class="o">:=</span> 
  <span class="kd">by</span> <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span> <span class="n">pq</span>
     <span class="n">cases</span> <span class="n">pq</span>
     <span class="n">case</span> <span class="n">intro</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=&gt;</span> <span class="n">exact</span> <span class="n">b</span>
</pre>
</div>
</div>
<p>
This is very similar, but can be easier to read. In general, if there are multiple (named) goals we can switch to one of them with <span class="default"><code class="highlight-inline"><span class="n">case</span></code></span>, and we don’t actually have to bind any variables (they will be anonymous), so we could do this proof as:
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">def</span> <span class="n">and_2'''''''</span> <span class="o">:</span> <span class="k">forall</span> <span class="o">{</span><span class="n">P</span>  <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">},</span> <span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span> <span class="bp">-&gt;</span> <span class="n">Q</span> <span class="o">:=</span> 
  <span class="kd">by</span> <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span> <span class="n">pq</span>
     <span class="n">cases</span> <span class="n">pq</span>
     <span class="n">case</span> <span class="n">intro</span> <span class="bp">=&gt;</span>
      <span class="n">exact</span> <span class="o">‹</span><span class="n">Q</span><span class="o">›</span> 
</pre>
</div>
</div>
<p></p>
<table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;">
<tbody>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Use</span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Description</span>
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">case</span> <span class="n">name</span> <span class="n">id</span> <span class="bp">...</span> <span class="bp">=&gt;</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    if there is a goal called <span class="default"><code class="highlight-inline"><span class="n">name</span></code></span>, focus on it, and bind (optional) identifiers to parameters if available.
   </p>
  </td>
 </tr>
</tbody>
</table>
<p></p>
<h5>
3
<tt>
 &nbsp;
</tt>
<a name="(part._.Re-doing_a_propositional_logic_proof)"></a>Re-doing a propositional logic proof
</h5>
<p>
Let’s prove a theorem that you did in HW1:
</p>
<p>
<span class="texMathDisplay">\neg (P \lor Q) \equiv \neg P \land \neg Q</span>
</p>
<p>
Here we’ve written <span class="texMathInline">\equiv</span> as "if-and-only-if" double implication,
rather than propositional equality. Both allow Lean to rewrite.
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">theorem</span> <span class="n">demorgan1</span> <span class="o">:</span> <span class="k">forall</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">},</span> <span class="bp">¬</span><span class="o">(</span><span class="n">P</span> <span class="bp">∨</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">¬</span><span class="n">P</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">Q</span> <span class="o">:=</span>
  <span class="kd">by</span> <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span>
     <span class="n">constructor</span>
     <span class="n">case</span> <span class="n">mp</span> <span class="bp">=&gt;</span> <span class="n">intro</span>
                <span class="n">constructor</span>
                <span class="n">case</span> <span class="n">left</span> <span class="bp">=&gt;</span> 
                  <span class="n">intro</span><span class="bp">;</span> <span class="n">apply</span> <span class="o">‹</span><span class="bp">¬</span><span class="o">(</span><span class="n">P</span> <span class="bp">∨</span> <span class="n">Q</span><span class="o">)›</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">Or.inl</span><span class="bp">;</span> <span class="n">assumption</span>
                <span class="n">case</span> <span class="n">right</span> <span class="bp">=&gt;</span> 
                  <span class="n">intro</span><span class="bp">;</span> <span class="n">apply</span> <span class="o">‹</span><span class="bp">¬</span><span class="o">(</span><span class="n">P</span> <span class="bp">∨</span> <span class="n">Q</span><span class="o">)›</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">Or.inr</span><span class="bp">;</span> <span class="n">assumption</span>
     <span class="n">case</span> <span class="n">mpr</span> <span class="bp">=&gt;</span> <span class="n">intro</span>
                 <span class="n">intro</span>
                 <span class="n">cases</span> <span class="o">‹</span><span class="bp">¬</span> <span class="n">P</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">Q</span><span class="o">›</span> 
                 <span class="n">cases</span> <span class="o">‹</span><span class="n">P</span> <span class="bp">∨</span> <span class="n">Q</span><span class="o">›</span>
                 <span class="n">case</span> <span class="n">inl</span> <span class="bp">=&gt;</span> <span class="n">apply</span> <span class="o">‹</span><span class="bp">¬</span><span class="n">P</span><span class="o">›</span><span class="bp">;</span> <span class="n">assumption</span>
                 <span class="n">case</span> <span class="n">inr</span> <span class="bp">=&gt;</span> <span class="n">apply</span> <span class="o">‹</span><span class="bp">¬</span><span class="n">Q</span><span class="o">›</span><span class="bp">;</span> <span class="n">assumption</span>
</pre>
</div>
</div>
<p>
Here we used two new tactics:
</p>
<p></p>
<table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;">
<tbody>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Use</span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Description</span>
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">constructor</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    if the goal is an inductive type, try applying its constructors to see if any match.
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">apply</span> <span class="n">H</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">H</span></code></span> must be a hypothesis or theorem with type <span class="default"><code class="highlight-inline"><span class="n">P1</span> <span class="bp">-&gt;</span> <span class="n">P2</span> <span class="bp">-&gt;</span> <span class="bp">...</span> <span class="bp">-&gt;</span> <span class="n">PN</span> <span class="bp">-&gt;</span> <span class="n">Q</span></code></span>, where the goal has type <span class="default"><code class="highlight-inline"><span class="n">Q</span></code></span>. This tactic will replace the goal with N separate goals, <span class="default"><code class="highlight-inline"><span class="n">P1</span></code></span>, through <span class="default"><code class="highlight-inline"><span class="n">PN</span></code></span>, as it corresponds to deciding to prove the premises of <span class="default"><code class="highlight-inline"><span class="n">H</span></code></span> and then using it to prove the goal. In the simply case where you just have <span class="default"><code class="highlight-inline"><span class="n">P</span> <span class="bp">-&gt;</span> <span class="n">Q</span></code></span> this will replace <span class="default"><code class="highlight-inline"><span class="n">Q</span></code></span> with <span class="default"><code class="highlight-inline"><span class="n">P</span></code></span>
   </p>
  </td>
 </tr>
</tbody>
</table>
<p></p>
<p>
Interestingly, the other proof that you did:
</p>
<p>
<span class="texMathDisplay">\neg (P \land Q) \equiv \neg P \lor \neg Q</span>
</p>
<p>
cannot be done in the core logic of Lean. The issue is that it is not
constructive; it can be done if we add classical axioms.
</p>
<p>
<span class="Larger">Stepping back: proofs here vs. proofs with truth tables</span>
</p>
<p>
Now that we’ve seen a few proofs, including doing a proof that
you did in propositional logic, it’s important to understand
the difference between proofs in Lean and proofs in propositional
logic.
</p>
<p>
In propositional logic, all variables can be either true or false,
and thus any formula can be computed via a finite truth table. In
a higher order logic like Lean, propositional variables are not
either true or false, but rather, they are either <span style="font-style: italic">provable</span>
or not provable. For a statement to be provable, it means that we
have constructed a proof term with that type, but that type may
involve data of arbitrary size, and thus the truth or falseness of
a given statement cannot be determined by a finite truth table. Thus
while the proof we just did of one of De Morgan’s laws is syntactically
the same as what you did in HW1, it is a much more powerful proof,
as it holds for any provable propositions, not just for T/F propositional
variables. Another way to think about this is that Lean has propositional
logic embedded, by way of the boolean data type. Thus, our proof
from HW1 was the following:
</p>
<div class="default">
<div class="highlight">
 <pre><span></span><span class="kd">theorem</span> <span class="n">demorganprop</span> <span class="o">:</span> 
  <span class="k">forall</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="n">Bool</span><span class="o">},</span> <span class="n">not</span> <span class="o">(</span><span class="n">or</span> <span class="n">P</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">=</span> <span class="n">and</span> <span class="o">(</span><span class="n">not</span> <span class="n">P</span><span class="o">)</span> <span class="o">(</span><span class="n">not</span> <span class="n">Q</span><span class="o">)</span> <span class="o">:=</span>
    <span class="kd">by</span> <span class="n">intros</span> <span class="n">P</span> <span class="n">Q</span>
       <span class="n">cases</span> <span class="n">P</span> <span class="bp">&lt;;&gt;</span> <span class="n">cases</span> <span class="n">Q</span> <span class="bp">&lt;;&gt;</span> <span class="n">rfl</span>
</pre>
</div>
</div>
<p>
Here we can see a new tactic: <span class="default"><code class="highlight-inline"><span class="bp">&lt;;&gt;</span></code></span>, which is used to chain
tactics together by applying what follows to everything that comes out of
the former. Here we can see that by doing case analysis on the two boolean
inputs, we can complete the proof trivially, as once we have constants,
simply evaluating the expression will give us the result.
</p>
<p></p>
<table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;">
<tbody>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Use</span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span style="font-weight: bold">Tactic Description</span>
   </p>
  </td>
 </tr>
 <tr>
  <td style="border-bottom: 1px solid black;">
   <p>
    <span class="default"><code class="highlight-inline"><span class="n">tactic1</span> <span class="bp">&lt;;&gt;</span> <span class="n">tactic2</span></code></span>
   </p>
  </td>
  <td style="border-bottom: 1px solid black;">
   <p>
    Apply <span class="default"><code class="highlight-inline"><span class="n">tactic1</span></code></span> to the current goal, and then apply <span class="default"><code class="highlight-inline"><span class="n">tactic2</span></code></span> to all goals that are generated by the result of tactic1 (0, 1, or more).
   </p>
  </td>
 </tr>
</tbody>
</table>
<p></p>
<p>
Attemptying to do that for the other proof will fail, as we cannot do
case analysis on <span class="default"><code class="highlight-inline"><span class="kt">Prop</span></code></span>: it is not an inductive type with a finite
number of constructors.
</p>
<div class="navsetbottom">
<span class="navleft">
<div class="nosearchform"></div>
&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
</span>
<span class="navright">&nbsp;&nbsp;<a href="l17.html" title="backward to &quot;Lecture 17: Exam 1, Part B&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="lectures.html" title="up to &quot;Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="l19.html" title="forward to &quot;Lecture 19: Inductive types &amp; proofs&quot;" data-pltdoc="x">next →</a></span>&nbsp;
</div>
</div>
</div>
<div id="contextindicator">
&nbsp;
</div>
</body>
</html>
