<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <title>
   dbp.io
  </title>
  <link rel="stylesheet" type="text/css" href="scribble.css" title="default">
  <link rel="stylesheet" type="text/css" href="minted.css" title="default">
  <link rel="stylesheet" type="text/css" href="manual-style.css" title="default">
  <link rel="stylesheet" type="text/css" href="manual-racket.css" title="default">
  <link rel="stylesheet" type="text/css" href="minted-default-style.css" title="default">
  <link rel="stylesheet" type="text/css" href="main.css" title="default">
  <script type="text/javascript" src="scribble-common.js"></script>
  <script type="text/javascript" src="manual-racket.js"></script>
 </head>
 <body id="scribble-racket-lang-org">
  <div class="tocset">
   <div class="tocview">
    <div class="tocviewlist tocviewlisttopspace">
     <div class="tocviewtitle">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td style="width: 1em;">
          <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">►</a>
         </td>
         <td></td>
         <td>
          <a href="index.html" class="tocviewlink" data-pltdoc="x">Logic &amp; Computation</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <div class="tocviewsublisttop" style="display: none;" id="tocview_0">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="syllabus.html" class="tocviewlink" data-pltdoc="x">Syllabus</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="schedule.html" class="tocviewlink" data-pltdoc="x">Schedule</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lectures.html" class="tocviewselflink" data-pltdoc="x">Lectures</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="homework.html" class="tocviewlink" data-pltdoc="x">Homework</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="ref.html" class="tocviewlink" data-pltdoc="x">Lean Tactic Reference</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">▼</a>
        </td>
        <td></td>
        <td>
         <a href="lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublist" style="display: block;" id="tocview_1">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l1.html" class="tocviewlink" data-pltdoc="x">Lecture 1:<span class="mywbr"> &nbsp;</span> Intro</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l2.html" class="tocviewlink" data-pltdoc="x">Lecture 2:<span class="mywbr"> &nbsp;</span> Logistics, Specifications in ISL</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l3.html" class="tocviewlink" data-pltdoc="x">Lecture 3:<span class="mywbr"> &nbsp;</span> Propositional Logic in Code</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l4.html" class="tocviewlink" data-pltdoc="x">Lecture 4:<span class="mywbr"> &nbsp;</span> Design /<span class="mywbr"> &nbsp;</span> Specification Recipe</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l5.html" class="tocviewlink" data-pltdoc="x">Lecture 5:<span class="mywbr"> &nbsp;</span> Relational Specifications</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l6.html" class="tocviewlink" data-pltdoc="x">Lecture 6:<span class="mywbr"> &nbsp;</span> For-<wbr>all, Intro to PBT</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l7.html" class="tocviewlink" data-pltdoc="x">Lecture 7:<span class="mywbr"> &nbsp;</span> ==&gt;, PBT filtering</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l8.html" class="tocviewlink" data-pltdoc="x">Lecture 8:<span class="mywbr"> &nbsp;</span> PBT generators</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l9.html" class="tocviewlink" data-pltdoc="x">Lecture 9:<span class="mywbr"> &nbsp;</span> SAT</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l10.html" class="tocviewlink" data-pltdoc="x">Lecture 10:<span class="mywbr"> &nbsp;</span> SMT &amp; Rosette</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l11.html" class="tocviewlink" data-pltdoc="x">Lecture 11:<span class="mywbr"> &nbsp;</span> Rosette &amp; Finitization</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l12.html" class="tocviewlink" data-pltdoc="x">Lecture 12:<span class="mywbr"> &nbsp;</span> Higher order logic</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l13.html" class="tocviewlink" data-pltdoc="x">Lecture 13:<span class="mywbr"> &nbsp;</span> Functions</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l14.html" class="tocviewlink" data-pltdoc="x">Lecture 14:<span class="mywbr"> &nbsp;</span> Propositional logic</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l15.html" class="tocviewlink" data-pltdoc="x">Lecture 15:<span class="mywbr"> &nbsp;</span> Propositional logic &amp; programming</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l16.html" class="tocviewlink" data-pltdoc="x">Lecture 16:<span class="mywbr"> &nbsp;</span> Exam 1, Part A</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l17.html" class="tocviewlink" data-pltdoc="x">Lecture 17:<span class="mywbr"> &nbsp;</span> Exam 1, Part B</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l18.html" class="tocviewlink" data-pltdoc="x">Lecture 18:<span class="mywbr"> &nbsp;</span> Proving with tactics</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l19.html" class="tocviewlink" data-pltdoc="x">Lecture 19:<span class="mywbr"> &nbsp;</span> Inductive types &amp; proofs</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l20.html" class="tocviewlink" data-pltdoc="x">Lecture 20:<span class="mywbr"> &nbsp;</span> Lists</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l21.html" class="tocviewlink" data-pltdoc="x">Lecture 21:<span class="mywbr"> &nbsp;</span>  Proof Practice</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l22.html" class="tocviewlink" data-pltdoc="x">Lecture 22:<span class="mywbr"> &nbsp;</span> Generalizing hypotheses</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l23.html" class="tocviewlink" data-pltdoc="x">Lecture 23:<span class="mywbr"> &nbsp;</span> Generalize</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="" class="tocviewselflink" data-pltdoc="x">Lecture 24:<span class="mywbr"> &nbsp;</span> Standard Libraries</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l25.html" class="tocviewlink" data-pltdoc="x">Lecture 25:<span class="mywbr"> &nbsp;</span> Forward Reasoning</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l26.html" class="tocviewlink" data-pltdoc="x">Lecture 26:<span class="mywbr"> &nbsp;</span> Proof Automation</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l27.html" class="tocviewlink" data-pltdoc="x">Lecture 27:<span class="mywbr"> &nbsp;</span> Compiler Correctness</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l28.html" class="tocviewlink" data-pltdoc="x">Lecture 28:<span class="mywbr"> &nbsp;</span> Induction</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l29.html" class="tocviewlink" data-pltdoc="x">Lecture 29:<span class="mywbr"> &nbsp;</span> Functions vs. Relations</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l30.html" class="tocviewlink" data-pltdoc="x">Lecture 30:<span class="mywbr"> &nbsp;</span> Why logic?</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l31.html" class="tocviewlink" data-pltdoc="x">Lecture 31:<span class="mywbr"> &nbsp;</span> Linear Logic</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l32.html" class="tocviewlink" data-pltdoc="x">Lecture 32</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l33.html" class="tocviewlink" data-pltdoc="x">Lecture 33</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l34.html" class="tocviewlink" data-pltdoc="x">Lecture 34</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l35.html" class="tocviewlink" data-pltdoc="x">Lecture 35:<span class="mywbr"> &nbsp;</span> Exam 2, Part A</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l36.html" class="tocviewlink" data-pltdoc="x">Lecture 36:<span class="mywbr"> &nbsp;</span> Exam 2, Part B</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l37.html" class="tocviewlink" data-pltdoc="x">Lecture 37</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="l38.html" class="tocviewlink" data-pltdoc="x">Lecture 38</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">►</a>
        </td>
        <td></td>
        <td>
         <a href="" class="tocviewselflink" data-pltdoc="x">Lecture 24:<span class="mywbr"> &nbsp;</span> Standard Libraries</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublistbottom" style="display: none;" id="tocview_2">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right">
          1&nbsp;
         </td>
         <td>
          <a href="#%28part._.Purpose%29" class="tocviewlink" data-pltdoc="x">Purpose</a>
         </td>
        </tr>
        <tr>
         <td align="right">
          2&nbsp;
         </td>
         <td>
          <a href="#%28part._.Outline%29" class="tocviewlink" data-pltdoc="x">Outline</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
   </div>
   <div class="tocsub">
    <div class="tocsubtitle">
     On this page:
    </div>
    <table class="tocsublist" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <span class="tocsublinknumber">1
        <tt>
         &nbsp;
        </tt>
       </span>
       <a href="#%28part._.Purpose%29" class="tocsubseclink" data-pltdoc="x">Purpose</a>
      </td>
     </tr>
     <tr>
      <td>
       <span class="tocsublinknumber">2
       <tt>
        &nbsp;
       </tt>
      </span>
      <a href="#%28part._.Outline%29" class="tocsubseclink" data-pltdoc="x">Outline</a>
     </td>
    </tr>
   </tbody>
  </table>
 </div>
</div>
<div class="maincolumn">
 <div class="main">
  <div class="versionbox">
   <span class="version">8.7</span>
  </div>
  <div class="navsettop">
   <span class="navleft">
   <div class="nosearchform"></div>
   &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
  </span>
  <span class="navright">&nbsp;&nbsp;<a href="l23.html" title="backward to &quot;Lecture 23: Generalize&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="lectures.html" title="up to &quot;Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="l25.html" title="forward to &quot;Lecture 25: Forward Reasoning&quot;" data-pltdoc="x">next →</a></span>&nbsp;
 </div>
 <h4>
  <a name="(part._l24)"></a>Lecture 24: Standard Libraries
 </h4>
 <h5>
  1
  <tt>
   &nbsp;
  </tt>
  <a name="(part._.Purpose)"></a>Purpose
 </h5>
 <p>
  Learn a little more about how to use standard libraries.
 </p>
 <h5>
  2
  <tt>
   &nbsp;
  </tt>
  <a name="(part._.Outline)"></a>Outline
 </h5>
 <p>
  Today, we’re going to practice more with representing properties as inductive relations. We’ll see two different representations of evenness (one we’ve seen before), both of which come up on the HW. We’ll also spend a little time learning how to use the standard library: some tricks for finding definitions, existing theorems, and a few particularly helpful ones you should know about.
 </p>
 <p>
  First, a new representation of evenness:
 </p>
 <div class="default">
  <div class="highlight">
   <pre><span></span><span class="kd">inductive</span> <span class="n">ev'</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">|</span> <span class="n">O</span> <span class="o">:</span> <span class="n">ev'</span> <span class="mi">0</span>
  <span class="bp">|</span> <span class="n">SSO</span> <span class="o">:</span> <span class="n">ev'</span> <span class="mi">2</span>
  <span class="bp">|</span> <span class="n">sum</span> <span class="n">n</span> <span class="n">m</span> <span class="o">(</span><span class="n">Hn</span> <span class="o">:</span> <span class="n">ev'</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">Hm</span> <span class="o">:</span> <span class="n">ev'</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="n">ev'</span> <span class="o">(</span><span class="n">Nat.add</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span>
</pre>
  </div>
 </div>
 <p>
  It’s often a good idea to test out a new definition by writing down some examples. So, we should be able to show that 0 &amp; 6 are even:
 </p>
 <div class="default">
  <div class="highlight">
   <pre><span></span><span class="kd">example</span> <span class="o">:</span> <span class="n">ev'</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ev'.O</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">ev'</span> <span class="mi">6</span> <span class="o">:=</span> 
 <span class="kd">by</span> <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="mi">6</span> <span class="bp">=</span> <span class="n">Nat.add</span> <span class="o">(</span><span class="n">Nat.add</span> <span class="mi">2</span> <span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">rfl</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">H</span><span class="o">]</span>
    <span class="c1">-- exact (ev'.sum (Nat.add 2 2) 2 (ev'.sum 2 2 ev'.SSO ev'.SSO) ev'.SSO)</span>
    <span class="n">constructor</span> <span class="c1">-- apply ev'.sum</span>
    <span class="n">constructor</span> <span class="c1">-- apply ev'.sum</span>
    <span class="n">constructor</span> <span class="c1">-- apply ev'.SSO</span>
    <span class="n">constructor</span> <span class="c1">-- apply ev'.SSO</span>
    <span class="n">constructor</span> <span class="c1">-- apply ev'.SSO</span>
</pre>
  </div>
 </div>
 <p>
  Note that we’ve given several different potential proofs fon 6 being even; they all rely on first decomposing 6 into (2 + 2) + 2, but we can then do it all at once (with exact) or much more easily, we can use either apply with a constructor or, the helper constructor that figures out which constructor to apply.
 </p>
 <p>
  To get started proving with this definition, let’s show that <span class="default"><code class="highlight-inline"><span class="n">ev'</span> <span class="o">(</span><span class="n">Nat.mul</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ev'</span> <span class="o">(</span><span class="n">Nat.mul</span> <span class="n">m</span> <span class="n">n</span><span class="o">)</span></code></span>:
 </p>
 <div class="default">
  <div class="highlight">
   <pre><span></span><span class="kd">theorem</span> <span class="n">comm_ev'</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span> <span class="n">ev'</span> <span class="o">(</span><span class="n">Nat.mul</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span> <span class="bp">-&gt;</span> <span class="n">ev'</span> <span class="o">(</span><span class="n">Nat.mul</span> <span class="n">m</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
 <span class="kd">by</span> <span class="n">intros</span> <span class="n">n</span> <span class="n">m</span> <span class="n">H</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.mul_eq</span><span class="o">,</span> <span class="n">Nat.mul_comm</span><span class="o">,</span> <span class="bp">&lt;-</span> <span class="n">Nat.mul_eq</span><span class="o">]</span>
    <span class="n">assumption</span>
</pre>
  </div>
 </div>
 <p>
  Note that to do this, we relied upon standard library theorems, and in particular, helper lemmas that move between the <span class="default"><code class="highlight-inline"><span class="n">n</span> <span class="bp">*</span> <span class="n">m</span></code></span> and <span class="default"><code class="highlight-inline"><span class="n">Nat.mul</span> <span class="n">n</span> <span class="n">m</span></code></span> syntax. These are defined for a lot of operators, and are generally called Nat.op_eq where the operator is called op. This is necessary because the standard library theorems are usually defined on the infix syntax, not on the actual function, so if we use the actual underlying functions, we have to move between to use the standard library theorems.
 </p>
 <p>
  Now, let’s try proving a different theorem: that twice any number is even:
 </p>
 <div class="default">
  <div class="highlight">
   <pre><span></span><span class="kd">theorem</span> <span class="n">twice_n_ev'</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">n</span><span class="o">,</span> <span class="n">ev'</span> <span class="o">(</span><span class="n">Nat.mul</span> <span class="n">n</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
 <span class="kd">by</span> <span class="n">intros</span> <span class="n">n</span>
    <span class="n">induction</span> <span class="n">n</span>
    <span class="n">case</span> <span class="n">zero</span> <span class="bp">=&gt;</span>
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">Nat.mul</span><span class="o">]</span><span class="bp">;</span> <span class="n">constructor</span>
    <span class="n">case</span> <span class="n">succ</span> <span class="n">n</span> <span class="n">IH</span> <span class="bp">=&gt;</span>
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">Nat.mul</span><span class="o">]</span>
      <span class="n">rw</span> <span class="o">[(</span><span class="bp">@</span><span class="n">Nat.add_eq</span> <span class="mi">0</span><span class="o">),</span> <span class="n">Nat.zero_add</span><span class="o">]</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.add_eq</span><span class="o">,</span> <span class="n">Nat.succ_add</span><span class="o">,</span> <span class="n">Nat.add_comm</span><span class="o">,</span> <span class="n">Nat.succ_add</span><span class="o">,</span> <span class="n">Nat.succ_eq_add_one</span><span class="o">,</span> <span class="n">Nat.succ_eq_add_one</span><span class="o">,</span> <span class="n">Nat.add_assoc</span><span class="o">]</span>
      <span class="n">constructor</span>
      <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">Nat.mul</span> <span class="n">n</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">Nat.mul</span><span class="o">,</span> <span class="n">Nat.add_eq</span><span class="o">,</span> <span class="n">Nat.zero_add</span><span class="o">]</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">H</span><span class="o">]</span>
      <span class="n">assumption</span>
      <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rfl</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">H</span><span class="o">]</span>
      <span class="n">constructor</span>

<span class="kd">theorem</span> <span class="n">twice_n_ev_better'</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">n</span><span class="o">,</span> <span class="n">ev'</span> <span class="o">(</span><span class="n">Nat.mul</span> <span class="n">n</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
 <span class="kd">by</span> <span class="n">intros</span> <span class="n">n</span>
    <span class="n">induction</span> <span class="n">n</span>
    <span class="n">case</span> <span class="n">zero</span> <span class="bp">=&gt;</span>
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">Nat.mul</span><span class="o">]</span><span class="bp">;</span> <span class="n">constructor</span>
    <span class="n">case</span> <span class="n">succ</span> <span class="n">n</span> <span class="n">IH</span> <span class="bp">=&gt;</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.mul_eq</span><span class="o">,</span> <span class="n">Nat.succ_mul</span><span class="o">]</span>
      <span class="n">constructor</span>
      <span class="n">assumption</span>
      <span class="n">constructor</span>


<span class="kd">theorem</span> <span class="n">twice_n_ev_alt'</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">n</span><span class="o">,</span> <span class="n">ev'</span> <span class="o">(</span><span class="n">Nat.mul</span> <span class="n">n</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
 <span class="kd">by</span> <span class="n">intros</span> <span class="n">n</span>
    <span class="n">apply</span> <span class="n">comm_ev'</span>
    <span class="n">induction</span> <span class="n">n</span>
    <span class="n">case</span> <span class="n">a.zero</span> <span class="bp">=&gt;</span> 
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">Nat.mul</span><span class="o">]</span><span class="bp">;</span> <span class="n">constructor</span>
    <span class="n">case</span> <span class="n">a.succ</span> <span class="n">n</span> <span class="n">IH</span> <span class="bp">=&gt;</span> 
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">Nat.mul</span><span class="o">]</span>
      <span class="n">constructor</span>
      <span class="n">assumption</span>
      <span class="n">constructor</span>
</pre>
  </div>
 </div>
 <p>
  Note something really interesting: we first proved this "directly": it worked, but it involved a lot of manipulation of addition, some multiplication, commutativity, etc. You might end up doing this, but it’s often worth first trying to understand why a proof should go through (in this case, the inductive argument should work since if you know <span class="default"><code class="highlight-inline"><span class="n">n</span> <span class="bp">*</span> <span class="mi">2</span></code></span> is even, then <span class="default"><code class="highlight-inline"><span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">n</span><span class="bp">*</span><span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span></code></span> is even, with the latter being straightforward to prove using your <span class="default"><code class="highlight-inline"><span class="n">ev'.sum</span></code></span> constructor). Once you know that, looking for appropriate theorems (in this case, <span class="default"><code class="highlight-inline"><span class="n">Nat.succ_mul</span></code></span>), or proving them first, may significantly cut down the effort.
 </p>
 <p>
  Another option, of course, is to restate what we are going to prove: in this case, by first using the commutativity theorem we proved. Once we did that, even without Nat.succ_mul our proof was much easier, as the way Nat.mul is defined, the simplification we get after induction was much easier (essentially, the number we were doing induction on corresponded to how Nat.mul is defined recursively). You don’t necessarily have to realize that is going to happen, but if you have multiple different equivalent representations, it’s often worth starting a proof with each one to see which one seems like it’ll worth more easily.
 </p>
 <p>
  Now, we’ll prove a more interesting (and challenging) theorem, that if the sum of two numbers is even, and one of the numbers is even, the other must be:
 </p>
 <div class="default">
  <div class="highlight">
   <pre><span></span><span class="kd">inductive</span> <span class="n">ev</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span> 
<span class="bp">|</span> <span class="n">O</span> <span class="o">:</span> <span class="n">ev</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">SS</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">ev</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">ev</span> <span class="o">(</span><span class="n">Nat.succ</span> <span class="o">(</span><span class="n">Nat.succ</span> <span class="n">n</span><span class="o">))</span>

<span class="kd">theorem</span> <span class="n">ev_ev__ev</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">n</span> <span class="n">m</span><span class="o">,</span> <span class="n">ev</span> <span class="o">(</span><span class="n">Nat.add</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span> <span class="bp">-&gt;</span> <span class="n">ev</span> <span class="n">n</span> <span class="bp">-&gt;</span> <span class="n">ev</span> <span class="n">m</span> <span class="o">:=</span>  
 <span class="kd">by</span> <span class="n">intros</span> <span class="n">n</span> <span class="n">m</span> <span class="n">H1</span> <span class="n">H2</span>
    <span class="n">induction</span> <span class="n">H2</span>
    <span class="n">case</span> <span class="n">O</span> <span class="bp">=&gt;</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.add_eq</span><span class="o">,</span> <span class="n">Nat.zero_add</span><span class="o">]</span> <span class="n">at</span> <span class="n">H1</span>
      <span class="n">assumption</span>
    <span class="n">case</span> <span class="n">SS</span> <span class="n">o</span> <span class="n">Ho</span> <span class="n">IH</span> <span class="bp">=&gt;</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">Nat.add_eq</span><span class="o">,</span> <span class="n">Nat.succ_add</span><span class="o">,</span> <span class="n">Nat.succ_add</span><span class="o">]</span> <span class="n">at</span> <span class="n">H1</span>
      <span class="n">cases</span> <span class="n">H1</span>
      <span class="n">case</span> <span class="n">SS</span> <span class="n">H1</span> <span class="bp">=&gt;</span> 
        <span class="n">rw</span> <span class="o">[</span><span class="bp">&lt;-</span> <span class="n">Nat.add_eq</span><span class="o">]</span> <span class="n">at</span> <span class="n">H1</span>
        <span class="n">apply</span> <span class="n">IH</span>
        <span class="n">assumption</span>
</pre>
  </div>
 </div>
 <p>
  One interesting question, when approaching a proof like this, is what to do induction on (assuming you need to do induction). There are two numbers, and an inductive relation (evenness) on the sum, plus another on the first number. When you are first starting, you may not know which one will be the most useful: and there isn’t necessarily only one answer, but even if multiple are possibilities, one may be much easier than the others!
 </p>
 <p>
  You can certainly try one approach, but be sure to stop and try others if it doesn’t seem to be going somewhere! And one general intuition is that if the structure of the goal matches the structure of the data you are doing induction on, likely the proof will be much easier. Since we are proving ev m, it’s a good bet that we should do induction on either <span class="default"><code class="highlight-inline"><span class="n">ev</span> <span class="n">n</span></code></span> or <span class="default"><code class="highlight-inline"><span class="n">ev</span> <span class="o">(</span><span class="n">Nat.add</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span></code></span>, as they both share the same evenness structure. Between those two, it’s more of a guess, but my guess was that ev n would give me more concrete information to work with, which I could then use with the other hypothesis (that ev (Nat.add n m)), so I tried that first.
 </p>
 <p>
  Note that I used a few different theorems defined on natural numbers. They are all defined on the n + m syntax, but you can move between that and <span class="default"><code class="highlight-inline"><span class="n">Nat.add</span> <span class="n">n</span> <span class="n">m</span></code></span> using the <span class="default"><code class="highlight-inline"><span class="n">Nat.add_eq</span></code></span> theorem (so you first rewrite with that, then use the built in theorems, and then move back with <span class="default"><code class="highlight-inline"><span class="n">Nat.add_eq</span></code></span> if you need to).
 </p>
 <div class="navsetbottom">
  <span class="navleft">
  <div class="nosearchform"></div>
  &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
 </span>
 <span class="navright">&nbsp;&nbsp;<a href="l23.html" title="backward to &quot;Lecture 23: Generalize&quot;" data-pltdoc="x">← prev</a>&nbsp;&nbsp;<a href="lectures.html" title="up to &quot;Lectures&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="l25.html" title="forward to &quot;Lecture 25: Forward Reasoning&quot;" data-pltdoc="x">next →</a></span>&nbsp;
</div>
</div>
</div>
<div id="contextindicator">
&nbsp;
</div>
</body>
</html>
