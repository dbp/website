<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/x-mathjax-config">
   MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ["$","$"], ["\\(","\\)"] ],
    displayMath: [ ["$$","$$"], 
                   ["\\[","\\]"], 
                   ["\\begin{equation}","\\end{equation}"], 
                   ["\\begin{equation*}","\\end{equation*}"] ],
    processEscapes: true,
    ignoreClass: "tex2jax_ignore|JavaHighlightBlock|JavaHighlight"
  },
  "HTML-CSS": {
    availableFonts: [],
    webFont: "Asana-Math",
    preferredFont: "Asana-Math",
    imageFont: null,
    mtexFontInherit: true
  }
});
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script src="codemirror.js"></script>
  <script src="python.js"></script>
  <script src="runmode.js"></script>
  <script src="setup-page.js"></script>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <title>
   dbp.io
  </title>
  <link rel="stylesheet" type="text/css" href="scribble.css" title="default">
  <link rel="stylesheet" type="text/css" href="racket.css" title="default">
  <link rel="stylesheet" type="text/css" href="manual-style.css" title="default">
  <link rel="stylesheet" type="text/css" href="manual-racket.css" title="default">
  <link rel="stylesheet" type="text/css" href="extra-styles.css" title="default">
  <link rel="stylesheet" type="text/css" href="codemirror.css" title="default">
  <script type="text/javascript" src="scribble-common.js"></script>
  <script type="text/javascript" src="manual-racket.js"></script>
 </head>
 <body id="scribble-racket-lang-org">
  <div class="tocset">
   <div class="tocview">
    <div class="tocviewlist tocviewlisttopspace">
     <div class="tocviewtitle">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td style="width: 1em;">
          <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">►</a>
         </td>
         <td></td>
         <td>
          <a href="index.html" class="tocviewlink" data-pltdoc="x">Fundamentals II
<br>
Introduction to Class-<wbr>based Program Design</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <div class="tocviewsublisttop" style="display: none;" id="tocview_0">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="General.html" class="tocviewlink" data-pltdoc="x">General</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="Texts.html" class="tocviewlink" data-pltdoc="x">Texts</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="Lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="Syllabus.html" class="tocviewlink" data-pltdoc="x">Syllabus</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="Lab_Materials.html" class="tocviewselflink" data-pltdoc="x">Lab Materials</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="Assignments.html" class="tocviewlink" data-pltdoc="x">Assignments</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="Pair_Programming_Overview.html" class="tocviewlink" data-pltdoc="x">Pair Programming Overview</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="code-style.html" class="tocviewlink" data-pltdoc="x">Code style</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="Documentation.html" class="tocviewlink" data-pltdoc="x">Documentation</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">▼</a>
        </td>
        <td></td>
        <td>
         <a href="Lab_Materials.html" class="tocviewlink" data-pltdoc="x">Lab Materials</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublist" style="display: block;" id="tocview_1">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab1.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 1:</span> Introduction to Eclipse and Simple Data Definitions</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab2.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 2:</span> Working with Self-<wbr>Referential Data</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab3.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 3:</span> Working with the debugger</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab4.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 4:</span> Working with Abstract Classes, Problem Solving</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab5.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 5:</span> Higher-<wbr>order functions</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab6.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 6:</span> Working with Cyclic Data</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab7.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 7:</span> Sameness</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="" class="tocviewselflink" data-pltdoc="x"><span class="LabNum">Lab 8:</span> Parametric data and visitors</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab9.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 9:</span> Working with Array<span class="mywbr"> &nbsp;</span>Lists and Loops</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="lab10.html" class="tocviewlink" data-pltdoc="x"><span class="LabNum">Lab 10:</span> An Introduction to the JUnit testing library</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
    <div class="tocviewlist">
     <table cellspacing="0" cellpadding="0">
      <tbody>
       <tr>
        <td style="width: 1em;">
         <a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">►</a>
        </td>
        <td></td>
        <td>
         <a href="" class="tocviewselflink" data-pltdoc="x"><span class="LabNum">Lab 8:</span> Parametric data and visitors</a>
        </td>
       </tr>
      </tbody>
     </table>
     <div class="tocviewsublistbottom" style="display: none;" id="tocview_2">
      <table cellspacing="0" cellpadding="0">
       <tbody>
        <tr>
         <td align="right"></td>
         <td>
          <a href="#%28part._.Getting_started%29" class="tocviewlink" data-pltdoc="x">Getting started</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="#%28part._.Let_there_be_.J.S.O.N%29" class="tocviewlink" data-pltdoc="x">Let there be JSON</a>
         </td>
        </tr>
        <tr>
         <td align="right"></td>
         <td>
          <a href="#%28part._.What_s_data_without_a_little_self-reference_%29" class="tocviewlink" data-pltdoc="x">What’s data without a little self-<wbr>reference?</a>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </div>
   </div>
   <div class="tocsub">
    <div class="tocsubtitle">
     On this page:
    </div>
    <table class="tocsublist" cellspacing="0">
     <tbody>
      <tr>
       <td>
        <span class="tocsublinknumber"></span><a href="#%28part._.Getting_started%29" class="tocsubseclink" data-pltdoc="x">Getting started</a>
       </td>
      </tr>
      <tr>
       <td>
        <span class="tocsublinknumber"></span><a href="#%28part._.Let_there_be_.J.S.O.N%29" class="tocsubseclink" data-pltdoc="x">Let there be JSON</a>
       </td>
      </tr>
      <tr>
       <td>
        <span class="tocsublinknumber"></span><a href="#%28part._.What_s_data_without_a_little_self-reference_%29" class="tocsubseclink" data-pltdoc="x">What’s data without a little self-<wbr>reference?</a>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
  </div>
  <div class="maincolumn">
   <div class="main">
    <div class="versionbox">
     <span class="version">8.14</span>
    </div>
    <div class="navsettop">
     <span class="navleft">
     <div class="nosearchform"></div>
     &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
    </span>
    <span class="navright">&nbsp;&nbsp;<a href="lab7.html" title="backward to &quot;Lab 7: Sameness&quot;" data-pltdoc="x" rel="prev">← prev</a>&nbsp;&nbsp;<a href="Lab_Materials.html" title="up to &quot;Lab Materials&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lab9.html" title="forward to &quot;Lab 9: Working with ArrayLists and Loops&quot;" data-pltdoc="x" rel="next">next →</a></span>&nbsp;
   </div>
   <h4 class="heading">
    <a name="(part._)"></a><span class="LabNum">Lab 8:</span> Parametric data and visitors<span class="button-group"><a href="#(part._)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span>
   </h4>
   <p>
    <span style="font-weight: bold">Goals:</span> Practice implementing the visitor pattern and using generics in a novel class.
   </p>
   <h5 class="heading">
    <a name="(part._.Getting_started)"></a>Getting started<span class="button-group"><a href="#(part._.Getting_started)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span>
   </h5>
   <p></p>
   <div class="SIntrapara">
    Copy and paste the following (hopefully) familiar code into Eclipse:
   </div>
   <div class="SIntrapara">
    <div class="JavaHighlightBlock">
     <blockquote class="SCodeFlow">
      <table cellspacing="0" cellpadding="0" class="RktBlk">
       <tbody>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// Represents functions of signature A -&gt; R, for some argument type A and
</span><span class="ProfjComment">// result type R
</span><span class="ProfjKeyword">interface</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">IFunc</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">A</span><span class="ProfjDefault">,</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">R</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">R</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">apply</span><span class="ProfjKeyword">(</span><span class="ProfjType">A</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">input</span><span class="ProfjKeyword">)</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// generic list
</span><span class="ProfjKeyword">interface</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjComment">// map over a list, and produce a new list with a (possibly different)
</span><span class="ProfjWhiteSpace">  </span><span class="ProfjComment">// element type
</span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">map</span><span class="ProfjKeyword">(</span><span class="ProfjType">IFunc</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjDefault">,</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">f</span><span class="ProfjKeyword">)</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// empty generic list
</span><span class="ProfjKeyword">class</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">MtList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">implements</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">public</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">map</span><span class="ProfjKeyword">(</span><span class="ProfjType">IFunc</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjDefault">,</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">f</span><span class="ProfjKeyword">)</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">    </span><span class="ProfjKeyword">return</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">new</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">MtList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjKeyword">(</span><span class="ProfjKeyword">)</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// non-empty generic list
</span><span class="ProfjKeyword">class</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">ConsList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">implements</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">T</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">first</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">rest</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">ConsList</span><span class="ProfjKeyword">(</span><span class="ProfjType">T</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">first</span><span class="ProfjDefault">,</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">rest</span><span class="ProfjKeyword">)</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">    </span><span class="ProfjKeyword">this</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">first</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">=</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">first</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">    </span><span class="ProfjKeyword">this</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">rest</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">=</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">rest</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">public</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">map</span><span class="ProfjKeyword">(</span><span class="ProfjType">IFunc</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjDefault">,</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">f</span><span class="ProfjKeyword">)</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">    </span><span class="ProfjKeyword">return</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">new</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">ConsList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">U</span><span class="ProfjKeyword">&gt;</span><span class="ProfjKeyword">(</span><span class="ProfjIdentifier">f</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">apply</span><span class="ProfjKeyword">(</span><span class="ProfjKeyword">this</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">first</span><span class="ProfjKeyword">)</span><span class="ProfjDefault">,</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">this</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">rest</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">map</span><span class="ProfjKeyword">(</span><span class="ProfjIdentifier">f</span><span class="ProfjKeyword">)</span><span class="ProfjKeyword">)</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
       </tbody>
      </table>
     </blockquote>
    </div>
   </div>
   <p></p>
   <ul>
    <li>
     <p>
      To begin, implement the equivalent of <span class="RktSym">foldr</span> from ISL on <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="RktMeta"></span></span></span>s.
What new types will you need?
     </p>
    </li>
    <li>
     <p>
      Write a test that sums a list of numbers using your <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">foldr</span><span class="RktMeta"></span></span></span> method.
     </p>
    </li>
   </ul>
   <h5 class="heading">
    <a name="(part._.Let_there_be_.J.S.O.N)"></a>Let there be JSON<span class="button-group"><a href="#(part._.Let_there_be_.J.S.O.N)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span>
   </h5>
   <p>
    JSON is an industry-standard data structure that allows for the storage and sharing
of tree-shaped data. Below is a definition of a <span class="emph">subset</span>
of JSON (more will come later). A JSON can either be a blank value, a number, boolean, or
string. In the real world, JSON numbers can have decimal values, but for our purposes we’ll
stick to integers.
   </p>
   <p></p>
   <div class="SIntrapara">
    Copy and paste the following definition into Eclipse:
   </div>
   <div class="SIntrapara">
    <div class="JavaHighlightBlock">
     <blockquote class="SCodeFlow">
      <table cellspacing="0" cellpadding="0" class="RktBlk">
       <tbody>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// a json value
</span><span class="ProfjKeyword">interface</span><span class="ProfjWhiteSpace"> </span><span class="ProfjConstant">IJSON</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// no value
</span><span class="ProfjKeyword">class</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">JSONBlank</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">implements</span><span class="ProfjWhiteSpace"> </span><span class="ProfjConstant">IJSON</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// a number
</span><span class="ProfjKeyword">class</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">JSONNumber</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">implements</span><span class="ProfjWhiteSpace"> </span><span class="ProfjConstant">IJSON</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjPrimType">int</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">number</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">JSONNumber</span><span class="ProfjKeyword">(</span><span class="ProfjPrimType">int</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">number</span><span class="ProfjKeyword">)</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">    </span><span class="ProfjKeyword">this</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">number</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">=</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">number</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// a boolean
</span><span class="ProfjKeyword">class</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">JSONBool</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">implements</span><span class="ProfjWhiteSpace"> </span><span class="ProfjConstant">IJSON</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjPrimType">boolean</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">bool</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">JSONBool</span><span class="ProfjKeyword">(</span><span class="ProfjPrimType">boolean</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">bool</span><span class="ProfjKeyword">)</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">    </span><span class="ProfjKeyword">this</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">bool</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">=</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">bool</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">// a string
</span><span class="ProfjKeyword">class</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">JSONString</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">implements</span><span class="ProfjWhiteSpace"> </span><span class="ProfjConstant">IJSON</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjPrimType">String</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">str</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">JSONString</span><span class="ProfjKeyword">(</span><span class="ProfjPrimType">String</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">str</span><span class="ProfjKeyword">)</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">    </span><span class="ProfjKeyword">this</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">str</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">=</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">str</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
       </tbody>
      </table>
     </blockquote>
    </div>
   </div>
   <p></p>
   <ul>
    <li>
     <p>
      Implement the <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">IJSONVistor</span><span class="ProfjKeyword">&lt;</span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="RktMeta"></span></span></span> interface, which is a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">IFunc</span><span class="ProfjKeyword">&lt;</span><span class="ProfjConstant">IJSON</span><span class="ProfjDefault">,</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">T</span><span class="ProfjKeyword">&gt;</span><span class="RktMeta"></span></span></span>
and follows the visitor pattern over <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjConstant">IJSON</span><span class="RktMeta"></span></span></span>s.
     </p>
    </li>
    <li>
     <p>
      Define a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">JSONToNumber</span><span class="RktMeta"></span></span></span> visitor, which coverts a <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjConstant">IJSON</span><span class="RktMeta"></span></span></span> to its number
value. Blanks are converted to 0, booleans 0 or 1 depending on if the value is false or
true, strings their length, and numbers their value.
     </p>
    </li>
    <li>
     <p>
      Map over a list of <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjConstant">IJSON</span><span class="RktMeta"></span></span></span> and produce all of their numbers as a test.
     </p>
    </li>
   </ul>
   <h5 class="heading">
    <a name="(part._.What_s_data_without_a_little_self-reference_)"></a>What’s data without a little self-reference?<span class="button-group"><a href="#(part._.What_s_data_without_a_little_self-reference_)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span>
   </h5>
   <p>
    As the definition for JSON stands in our current form, it’s not very useful.
After all, it doesn’t allow for our favorite type of data: lists!
Let’s extend the definition to allow for them.
   </p>
   <p></p>
   <div class="SIntrapara">
    Copy and paste the following definition into Eclipse:
   </div>
   <div class="SIntrapara">
    <div class="JavaHighlightBlock">
     <blockquote class="SCodeFlow">
      <table cellspacing="0" cellpadding="0" class="RktBlk">
       <tbody>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjComment">//a list of JSON values
</span><span class="ProfjKeyword">class</span><span class="ProfjWhiteSpace"> </span><span class="ProfjType">JSONList</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">implements</span><span class="ProfjWhiteSpace"> </span><span class="ProfjConstant">IJSON</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjConstant">IJSON</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">values</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjError">&nbsp;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjType">JSONList</span><span class="ProfjKeyword">(</span><span class="ProfjType">IList</span><span class="ProfjKeyword">&lt;</span><span class="ProfjConstant">IJSON</span><span class="ProfjKeyword">&gt;</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">values</span><span class="ProfjKeyword">)</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">{</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">    </span><span class="ProfjKeyword">this</span><span class="ProfjDefault">.</span><span class="ProfjIdentifier">values</span><span class="ProfjWhiteSpace"> </span><span class="ProfjKeyword">=</span><span class="ProfjWhiteSpace"> </span><span class="ProfjIdentifier">values</span><span class="ProfjDefault">;</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjWhiteSpace">  </span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
        <tr>
         <td>
          <span class="RktMeta"></span><span class="ProfjKeyword">}</span><span class="RktMeta"></span>
         </td>
        </tr>
       </tbody>
      </table>
     </blockquote>
    </div>
   </div>
   <p></p>
   <ul>
    <li>
     <p>
      Extend the visitor pattern on <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjConstant">IJSON</span><span class="RktMeta"></span></span></span>s as needed.
     </p>
    </li>
    <li>
     <p>
      A <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">JSONList</span><span class="RktMeta"></span></span></span>’s value is the sum of all of its sub-values converted to their number value.
Extend <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjType">JSONToNumber</span><span class="RktMeta"></span></span></span> as needed. (Hint: the fold method in IList may be helpful!)
     </p>
    </li>
   </ul>
   <p>
    Do a sanity check: does your <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjConstant">IJSON</span><span class="RktMeta"></span></span></span> interface have anything other than an <span class="RktBlk"><span class="JavaHighlight"><span class="RktMeta"></span><span class="ProfjIdentifier">accept</span><span class="RktMeta"></span></span></span> method? If so,
you have likely not implemented the visitor pattern correctly. Ask a staff member for further clarification.
If not, continue onwards.
   </p>
   <div class="navsetbottom">
    <span class="navleft">
    <div class="nosearchform"></div>
    &nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span>
   </span>
   <span class="navright">&nbsp;&nbsp;<a href="lab7.html" title="backward to &quot;Lab 7: Sameness&quot;" data-pltdoc="x" rel="prev">← prev</a>&nbsp;&nbsp;<a href="Lab_Materials.html" title="up to &quot;Lab Materials&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="lab9.html" title="forward to &quot;Lab 9: Working with ArrayLists and Loops&quot;" data-pltdoc="x" rel="next">next →</a></span>&nbsp;
  </div>
 </div>
</div>
<div id="contextindicator">
 &nbsp;
</div>
</body>
</html>
